import{i as e,u as s,b as t,j as a,c as r,h as d,L as l}from"./vendor-BBNOa7qo.js";import{a as i}from"./index-CpGYe4dt.js";function n(){const[n]=e(),o=s(),[c,m]=t.useState({password:"",confirmPassword:""}),[x,h]=t.useState(!1),[p,u]=t.useState(!1),[w,b]=t.useState(""),g=n.get("token");t.useEffect(()=>{g||b("Invalid or missing reset token")},[g]);const j=e=>{m({...c,[e.target.name]:e.target.value})};return p?a.jsx("div",{className:"min-h-[100dvh] bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-2xl mb-4",children:a.jsx(r,{className:"w-8 h-8 text-green-600"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Password Reset!"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Your password has been reset successfully"})]}),a.jsxs("div",{className:"card text-center",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Redirecting to login page..."}),a.jsx(d,{to:"/login",className:"btn-primary inline-block",children:"Go to Login"})]})]})}):a.jsx("div",{className:"min-h-[100dvh] bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4",children:a.jsx(l,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reset Password"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your new password"})]}),a.jsxs("div",{className:"card",children:[g?a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),b(""),c.password===c.confirmPassword)if(c.password.length<6)b("Password must be at least 6 characters");else{h(!0);try{await i.post("https://smart-link-backend-production.up.railway.app/api/auth/reset-password",{token:g,password:c.password}),u(!0),setTimeout(()=>{o("/login")},3e3)}catch(s){b(s.response?.data?.error||"Failed to reset password")}finally{h(!1)}}else b("Passwords do not match")},className:"space-y-6",children:[w&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-lg p-4",children:w}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",name:"password",value:c.password,onChange:j,className:"input-field",placeholder:"••••••••",required:!0,autoComplete:"new-password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:j,className:"input-field",placeholder:"••••••••",required:!0,autoComplete:"new-password"})]}),a.jsx("button",{type:"submit",disabled:x,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Resetting...":"Reset Password"})]}):a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 rounded-lg p-4",children:[a.jsx("p",{className:"font-medium",children:"Invalid Reset Link"}),a.jsx("p",{className:"text-sm mt-1",children:"This reset link is invalid or has expired. Please request a new one."}),a.jsx(d,{to:"/forgot-password",className:"text-sm text-red-600 hover:text-red-700 font-medium mt-2 inline-block",children:"Request New Link →"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx(d,{to:"/login",className:"text-sm text-gray-600 hover:text-gray-800",children:"Back to Login"})})]})]})})}export{n as default};
