import{i as e,u as r,b as t,j as a}from"./vendor-BBNOa7qo.js";import{u as n}from"./index-CpGYe4dt.js";function s(){const[s]=e(),o=r(),{loginWithToken:i}=n(),[l,d]=t.useState("processing"),[c,u]=t.useState("");return t.useEffect(()=>{(async()=>{try{const r=s.get("token"),t=s.get("error");if(t){d("error");const e={google_auth_failed:"Google authentication failed. Please try again.",auth_error:"Authentication error occurred. Please try again.",user_not_found:"User not found. Please register first.",token_failed:"Failed to create authentication token.",no_token:"No authentication token received.",callback_failed:"Authentication callback failed."}[t]||"Authentication failed. Please try again.";return u(e),void setTimeout(()=>{o("/login?error="+encodeURIComponent(e),{replace:!0})},3e3)}if(r)try{await i(r),d("success"),setTimeout(()=>{o("/dashboard",{replace:!0})},1e3)}catch(e){let r="Login failed. Please try again.";if(e.response){const{status:t,data:a}=e.response;404===t?r="Account not found. Your Google account may not be registered yet.":429===t?r="Too many attempts. Please wait a few minutes and try again.":a?.error&&(r=a.error)}d("error"),u(r),setTimeout(()=>{o("/login?error="+encodeURIComponent(r),{replace:!0})},3e3)}else d("error"),u("No authentication token received"),setTimeout(()=>{o("/login?error=no_token",{replace:!0})},2e3)}catch(r){d("error"),u("An unexpected error occurred"),setTimeout(()=>{o("/login?error=callback_failed",{replace:!0})},2e3)}})()},[s,o,i]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 text-center max-w-md w-full",children:["processing"===l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-gray-200 dark:border-gray-700 border-t-blue-600 dark:border-t-blue-400 mx-auto"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Authenticating..."}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please wait while we log you in"}),a.jsx("div",{className:"mt-6 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full animate-progress"})})]}),"success"===l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto animate-bounce",children:a.jsx("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Success!"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Redirecting to your dashboard..."})]}),"error"===l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto",children:a.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Authentication Failed"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:c||"An error occurred during authentication"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Redirecting back to login..."})]})]}),a.jsx("style",{children:"\n        @keyframes progress {\n          0% { width: 0%; }\n          50% { width: 70%; }\n          100% { width: 100%; }\n        }\n        .animate-progress {\n          animation: progress 2s ease-in-out infinite;\n        }\n      "})]})}export{s as default};
