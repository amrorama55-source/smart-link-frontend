import{b as e,j as s,M as a,X as t,aE as r,aA as l,Z as i,an as n,h as d,L as x,a8 as o,aF as m,S as c,n as h,aw as g,aG as p,aH as b,t as u}from"./vendor-BBNOa7qo.js";import{u as f,a as y,j as w}from"./index-CpGYe4dt.js";function j(){const{user:r}=f(),[l,i]=e.useState(!1),[n,d]=e.useState(!1),[x,o]=e.useState(!1);if(!r||r.isEmailVerified||l)return null;return s.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(a,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Verify your email"})," to unlock all features."]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[x?s.jsx("span",{className:"text-sm text-green-600 font-medium",children:"âœ“ Email sent!"}):s.jsx("button",{onClick:async()=>{d(!0);try{const e=localStorage.getItem("token");await y.post("https://smart-link-backend-production.up.railway.app/api/auth/resend-verification",{},{headers:{Authorization:`Bearer ${e}`}}),o(!0),setTimeout(()=>o(!1),5e3)}catch(e){alert("Failed to resend email")}finally{d(!1)}},disabled:n,className:"text-sm text-yellow-800 hover:text-yellow-900 font-medium underline disabled:opacity-50",children:n?"Sending...":"Resend email"}),s.jsx("button",{onClick:()=>i(!0),className:"text-yellow-600 hover:text-yellow-800",children:s.jsx(t,{className:"w-5 h-5"})})]})]})})})}function k(){const{user:a,logout:t}=f(),{darkMode:y,toggleDarkMode:k}=w(),N=r(),[v,S]=e.useState(!1),C=e.useRef(null);e.useEffect(()=>{const e=e=>{C.current&&!C.current.contains(e.target)&&S(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const A=e=>"flex flex-col sm:flex-row items-center justify-center sm:justify-start gap-1 sm:gap-2.5 px-2 sm:px-4 py-2 sm:py-2.5 rounded-lg transition-all font-medium min-h-[44px] min-w-[60px] sm:min-w-auto "+((e=>N.pathname===e)(e)?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"),L={free:{color:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",icon:n},pro:{color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",icon:i},business:{color:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",icon:l}},E=a?.plan||"free",U=L[E]?.icon||n;return s.jsxs(s.Fragment,{children:[s.jsx(j,{}),s.jsx("nav",{className:"bg-white/95 dark:bg-gray-900/95 border-b border-gray-100 dark:border-gray-800 backdrop-blur-sm sticky top-0 z-50 safe-top",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:[s.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16 border-b border-gray-200 dark:border-gray-800 sm:border-0",children:[s.jsxs(d,{to:"/dashboard",className:"flex items-center gap-2 sm:gap-3 hover:opacity-80 transition-opacity min-h-[44px] -ml-1 pl-1",children:[s.jsx("div",{className:"w-9 h-9 sm:w-11 sm:h-11 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-md flex-shrink-0",children:s.jsx(x,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsx("span",{className:"text-base sm:text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"Smart Link"})]}),s.jsxs("div",{className:"relative",ref:C,children:[s.jsxs("button",{onClick:()=>S(!v),className:"flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 sm:py-2.5 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all duration-200 min-h-[44px]",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 p-0.5 shadow-lg",children:s.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-900 flex items-center justify-center",children:s.jsx("span",{className:"text-xs sm:text-sm font-bold bg-gradient-to-br from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:(a?.name||"U").charAt(0).toUpperCase()})})}),s.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 sm:w-3 sm:h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900"})]}),s.jsxs("div",{className:"text-left min-w-0 hidden sm:block",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight truncate max-w-[120px]",children:a?.name||"User"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight mt-0.5 capitalize",children:[E," Plan"]})]}),s.jsx(o,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 transition-transform duration-200 flex-shrink-0 hidden sm:block "+(v?"rotate-180":"")})]}),v&&s.jsxs("div",{className:"absolute right-0 mt-2 w-[min(100vw-2rem,16rem)] sm:w-72 max-h-[min(70vh,22rem)] overflow-y-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 scrollbar-hide",children:[s.jsx("div",{className:"px-4 sm:px-5 py-3 sm:py-4 bg-gray-50 dark:bg-gray-800/80 border-b border-gray-100 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 p-0.5 shadow-lg flex-shrink-0",children:s.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-900 flex items-center justify-center",children:s.jsx("span",{className:"text-base sm:text-lg font-bold bg-gradient-to-br from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:(a?.name||"U").charAt(0).toUpperCase()})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:a?.name||"User"}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:a?.email}),s.jsxs("div",{className:`inline-flex items-center gap-1.5 mt-1.5 px-2.5 py-1 rounded-full text-xs font-semibold ${L[E]?.color}`,children:[s.jsx(U,{className:"w-3.5 h-3.5"}),s.jsxs("span",{className:"capitalize",children:[E," Plan"]})]})]})]})}),s.jsxs("div",{className:"py-2 px-2",children:[s.jsxs(d,{to:"/profile",onClick:()=>S(!1),className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all duration-150 group min-h-[48px]",children:[s.jsx("div",{className:"w-9 h-9 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center flex-shrink-0",children:s.jsx(m,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold",children:"My Profile"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"View and edit profile"})]})]}),s.jsxs(d,{to:"/profile?tab=settings",onClick:()=>S(!1),className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-all duration-150 group",children:[s.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 rounded-lg bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center group-hover:bg-purple-100 dark:group-hover:bg-purple-900/30 transition-colors flex-shrink-0",children:s.jsx(Settings,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold",children:"Settings"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Account preferences"})]})]}),s.jsxs("button",{onClick:()=>{k(),S(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-all duration-150 group",children:[s.jsx("div",{className:`w-8 h-8 sm:w-9 sm:h-9 rounded-lg flex-shrink-0 ${y?"bg-amber-50 dark:bg-amber-900/20":"bg-indigo-50 dark:bg-indigo-900/20"} flex items-center justify-center group-hover:bg-opacity-80 transition-colors`,children:y?s.jsx(c,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 dark:text-amber-400"}):s.jsx(h,{className:"w-4 h-4 sm:w-5 sm:h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsxs("p",{className:"text-sm font-semibold",children:[y?"Light":"Dark"," Mode"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Switch theme"})]})]})]}),s.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 p-2",children:s.jsxs("button",{type:"button",onClick:()=>{confirm("Are you sure you want to sign out?")&&t(),S(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-150 group min-h-[48px] text-left",children:[s.jsx("div",{className:"w-9 h-9 rounded-xl bg-red-50 dark:bg-red-900/20 flex items-center justify-center flex-shrink-0",children:s.jsx(g,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold",children:"Sign Out"}),s.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:"Logout from account"})]})]})})]})]})]}),s.jsxs("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-1 pt-1 scrollbar-hide -mx-2 px-2",children:[s.jsxs(d,{to:"/dashboard",className:A("/dashboard"),children:[s.jsx(p,{className:"w-5 h-5 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:"Dashboard"})]}),s.jsxs(d,{to:"/links",className:A("/links"),children:[s.jsx(b,{className:"w-5 h-5 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:"Links"})]}),s.jsxs(d,{to:"/analytics",className:A("/analytics"),children:[s.jsx(u,{className:"w-5 h-5 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:"Analytics"})]}),s.jsxs(d,{to:"/bio",className:A("/bio"),children:[s.jsx(n,{className:"w-5 h-5 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:"Bio"})]}),s.jsxs(d,{to:"/profile",className:A("/profile"),children:[s.jsx(m,{className:"w-5 h-5 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:"Profile"})]})]})]})})]})}export{k as N};
