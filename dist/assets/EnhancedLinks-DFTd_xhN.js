import{g as e,j as t,b as r,L as a,$ as s,a0 as n,X as l,W as i,w as o,a1 as d,x as c,a2 as g,a3 as u,c as x,a4 as m,a5 as h,Z as b,a6 as p,a7 as f,a8 as y,y as k,a9 as v,G as j,K as w,v as N,E as C,f as A,aa as T,ab as E,z as R,_ as S,ac as L,Q as M}from"./vendor-BBNOa7qo.js";import{S as P,b as I,c as D,d as U,e as B,f as z,h as O}from"./index-CpGYe4dt.js";import{N as F}from"./Navbar-BT3cOAht.js";var V,H,$={};var K,Y={},G={};function J(){if(K)return G;let e;K=1;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return G.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},G.getSymbolTotalCodewords=function(e){return t[e]},G.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},G.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');e=t},G.isKanjiModeEnabled=function(){return void 0!==e},G.toSJIS=function(t){return e(t)},G}var _,Q,q,W,Z,X={};function ee(){return _||(_=1,(e=X).L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},e.from=function(t,r){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(a){return r}}),X;var e}var te,re={};var ae,se={};var ne,le={};var ie,oe={};function de(){if(ie)return oe;ie=1;const e=ee(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return oe.getBlocksCount=function(r,a){switch(a){case e.L:return t[4*(r-1)+0];case e.M:return t[4*(r-1)+1];case e.Q:return t[4*(r-1)+2];case e.H:return t[4*(r-1)+3];default:return}},oe.getTotalCodewordsCount=function(t,a){switch(a){case e.L:return r[4*(t-1)+0];case e.M:return r[4*(t-1)+1];case e.Q:return r[4*(t-1)+2];case e.H:return r[4*(t-1)+3];default:return}},oe}var ce,ge,ue,xe,me={},he={};function be(){return ge||(ge=1,function(e){const t=function(){if(ce)return he;ce=1;const e=new Uint8Array(512),t=new Uint8Array(256);return function(){let r=1;for(let a=0;a<255;a++)e[a]=r,t[r]=a,r<<=1,256&r&&(r^=285);for(let t=255;t<512;t++)e[t]=e[t-255]}(),he.log=function(e){if(e<1)throw new Error("log("+e+")");return t[e]},he.exp=function(t){return e[t]},he.mul=function(r,a){return 0===r||0===a?0:e[t[r]+t[a]]},he}();e.mul=function(e,r){const a=new Uint8Array(e.length+r.length-1);for(let s=0;s<e.length;s++)for(let n=0;n<r.length;n++)a[s+n]^=t.mul(e[s],r[n]);return a},e.mod=function(e,r){let a=new Uint8Array(e);for(;a.length-r.length>=0;){const e=a[0];for(let n=0;n<r.length;n++)a[n]^=t.mul(r[n],e);let s=0;for(;s<a.length&&0===a[s];)s++;a=a.slice(s)}return a},e.generateECPolynomial=function(r){let a=new Uint8Array([1]);for(let s=0;s<r;s++)a=e.mul(a,new Uint8Array([1,t.exp(s)]));return a}}(me)),me}var pe,fe={},ye={},ke={};function ve(){return pe||(pe=1,ke.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ke}var je,we,Ne,Ce={};function Ae(){if(je)return Ce;je=1;const e="[0-9]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+")(?:.|[\r\n]))+";Ce.KANJI=new RegExp(t,"g"),Ce.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ce.BYTE=new RegExp(r,"g"),Ce.NUMERIC=new RegExp(e,"g"),Ce.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+t+"$"),s=new RegExp("^"+e+"$"),n=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ce.testKanji=function(e){return a.test(e)},Ce.testNumeric=function(e){return s.test(e)},Ce.testAlphanumeric=function(e){return n.test(e)},Ce}function Te(){return we||(we=1,function(e){const t=ve(),r=Ae();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,r){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?e.ccBits[0]:r<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return r.testNumeric(t)?e.NUMERIC:r.testAlphanumeric(t)?e.ALPHANUMERIC:r.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,r){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(a){return r}}}(ye)),ye}function Ee(){return Ne||(Ne=1,function(e){const t=J(),r=de(),a=ee(),s=Te(),n=ve(),l=t.getBCHDigit(7973);function i(e,t){return s.getCharCountIndicator(e,t)+4}function o(e,t){let r=0;return e.forEach(function(e){const a=i(e.mode,t);r+=a+e.getBitsLength()}),r}e.from=function(e,t){return n.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,a,l){if(!n.isValid(e))throw new Error("Invalid QR Code version");void 0===l&&(l=s.BYTE);const o=8*(t.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,a));if(l===s.MIXED)return o;const d=o-i(l,e);switch(l){case s.NUMERIC:return Math.floor(d/10*3);case s.ALPHANUMERIC:return Math.floor(d/11*2);case s.KANJI:return Math.floor(d/13);case s.BYTE:default:return Math.floor(d/8)}},e.getBestVersionForData=function(t,r){let n;const l=a.from(r,a.M);if(Array.isArray(t)){if(t.length>1)return function(t,r){for(let a=1;a<=40;a++)if(o(t,a)<=e.getCapacity(a,r,s.MIXED))return a}(t,l);if(0===t.length)return 1;n=t[0]}else n=t;return function(t,r,a){for(let s=1;s<=40;s++)if(r<=e.getCapacity(s,a,t))return s}(n.mode,n.getLength(),l)},e.getEncodedBits=function(e){if(!n.isValid(e)||e<7)throw new Error("Invalid QR Code version");let r=e<<12;for(;t.getBCHDigit(r)-l>=0;)r^=7973<<t.getBCHDigit(r)-l;return e<<12|r}}(fe)),fe}var Re,Se={};var Le,Me,Pe,Ie,De,Ue,Be,ze,Oe={};var Fe,Ve,He,$e={exports:{}};function Ke(){return Ve||(Ve=1,function(e){const t=Te(),r=function(){if(Me)return Le;Me=1;const e=Te();function t(t){this.mode=e.NUMERIC,this.data=t.toString()}return t.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){let t,r,a;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),a=parseInt(r,10),e.put(a,10);const s=this.data.length-t;s>0&&(r=this.data.substr(t),a=parseInt(r,10),e.put(a,3*s+1))},Le=t}(),a=function(){if(Ie)return Pe;Ie=1;const e=Te(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(t){this.mode=e.ALPHANUMERIC,this.data=t}return r.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let a=45*t.indexOf(this.data[r]);a+=t.indexOf(this.data[r+1]),e.put(a,11)}this.data.length%2&&e.put(t.indexOf(this.data[r]),6)},Pe=r}(),s=function(){if(Ue)return De;Ue=1;const e=Te();function t(t){this.mode=e.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}return t.getBitsLength=function(e){return 8*e},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},De=t}(),n=function(){if(ze)return Be;ze=1;const e=Te(),t=J();function r(t){this.mode=e.KANJI,this.data=t}return r.getBitsLength=function(e){return 13*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let r;for(r=0;r<this.data.length;r++){let a=t.toSJIS(this.data[r]);if(a>=33088&&a<=40956)a-=33088;else{if(!(a>=57408&&a<=60351))throw new Error("Invalid SJIS character: "+this.data[r]+"\nMake sure your charset is UTF-8");a-=49472}a=192*(a>>>8&255)+(255&a),e.put(a,13)}},Be=r}(),l=Ae(),i=J(),o=function(){return Fe?$e.exports:(Fe=1,$e.exports=e={single_source_shortest_paths:function(t,r,a){var s={},n={};n[r]=0;var l,i,o,d,c,g,u,x=e.PriorityQueue.make();for(x.push(r,0);!x.empty();)for(o in i=(l=x.pop()).value,d=l.cost,c=t[i]||{})c.hasOwnProperty(o)&&(g=d+c[o],u=n[o],(void 0===n[o]||u>g)&&(n[o]=g,x.push(o,g),s[o]=i));if(void 0!==a&&void 0===n[a]){var m=["Could not find a path from ",r," to ",a,"."].join("");throw new Error(m)}return s},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],a=t;a;)r.push(a),e[a],a=e[a];return r.reverse(),r},find_path:function(t,r,a){var s=e.single_source_shortest_paths(t,r,a);return e.extract_shortest_path_from_predecessor_list(s,a)},PriorityQueue:{make:function(t){var r,a=e.PriorityQueue,s={};for(r in t=t||{},a)a.hasOwnProperty(r)&&(s[r]=a[r]);return s.queue=[],s.sorter=t.sorter||a.default_sorter,s},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}});var e}();function d(e){return unescape(encodeURIComponent(e)).length}function c(e,t,r){const a=[];let s;for(;null!==(s=e.exec(r));)a.push({data:s[0],index:s.index,mode:t,length:s[0].length});return a}function g(e){const r=c(l.NUMERIC,t.NUMERIC,e),a=c(l.ALPHANUMERIC,t.ALPHANUMERIC,e);let s,n;i.isKanjiModeEnabled()?(s=c(l.BYTE,t.BYTE,e),n=c(l.KANJI,t.KANJI,e)):(s=c(l.BYTE_KANJI,t.BYTE,e),n=[]);return r.concat(a,s,n).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function u(e,l){switch(l){case t.NUMERIC:return r.getBitsLength(e);case t.ALPHANUMERIC:return a.getBitsLength(e);case t.KANJI:return n.getBitsLength(e);case t.BYTE:return s.getBitsLength(e)}}function x(e,l){let o;const d=t.getBestModeForData(e);if(o=t.from(l,d),o!==t.BYTE&&o.bit<d.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(o)+".\n Suggested mode is: "+t.toString(d));switch(o!==t.KANJI||i.isKanjiModeEnabled()||(o=t.BYTE),o){case t.NUMERIC:return new r(e);case t.ALPHANUMERIC:return new a(e);case t.KANJI:return new n(e);case t.BYTE:return new s(e)}}e.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(x(t,null)):t.data&&e.push(x(t.data,t.mode)),e},[])},e.fromString=function(r,a){const s=function(e){const r=[];for(let a=0;a<e.length;a++){const s=e[a];switch(s.mode){case t.NUMERIC:r.push([s,{data:s.data,mode:t.ALPHANUMERIC,length:s.length},{data:s.data,mode:t.BYTE,length:s.length}]);break;case t.ALPHANUMERIC:r.push([s,{data:s.data,mode:t.BYTE,length:s.length}]);break;case t.KANJI:r.push([s,{data:s.data,mode:t.BYTE,length:d(s.data)}]);break;case t.BYTE:r.push([{data:s.data,mode:t.BYTE,length:d(s.data)}])}}return r}(g(r,i.isKanjiModeEnabled())),n=function(e,r){const a={},s={start:{}};let n=["start"];for(let l=0;l<e.length;l++){const i=e[l],o=[];for(let e=0;e<i.length;e++){const d=i[e],c=""+l+e;o.push(c),a[c]={node:d,lastCount:0},s[c]={};for(let e=0;e<n.length;e++){const l=n[e];a[l]&&a[l].node.mode===d.mode?(s[l][c]=u(a[l].lastCount+d.length,d.mode)-u(a[l].lastCount,d.mode),a[l].lastCount+=d.length):(a[l]&&(a[l].lastCount=d.length),s[l][c]=u(d.length,d.mode)+4+t.getCharCountIndicator(d.mode,r))}}n=o}for(let t=0;t<n.length;t++)s[n[t]].end=0;return{map:s,table:a}}(s,a),l=o.find_path(n.map,"start","end"),c=[];for(let e=1;e<l.length-1;e++)c.push(n.table[l[e]].node);return e.fromArray(function(e){return e.reduce(function(e,t){const r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(c))},e.rawSplit=function(t){return e.fromArray(g(t,i.isKanjiModeEnabled()))}}(Oe)),Oe}function Ye(){if(He)return Y;He=1;const e=J(),t=ee(),r=function(){if(q)return Q;function e(){this.buffer=[],this.length=0}return q=1,e.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},Q=e}(),a=function(){if(Z)return W;function e(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return Z=1,e.prototype.set=function(e,t,r,a){const s=e*this.size+t;this.data[s]=r,a&&(this.reservedBit[s]=!0)},e.prototype.get=function(e,t){return this.data[e*this.size+t]},e.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},e.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},W=e}(),s=(te||(te=1,function(e){const t=J().getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const r=Math.floor(e/7)+2,a=t(e),s=145===a?26:2*Math.ceil((a-13)/(2*r-2)),n=[a-7];for(let t=1;t<r-1;t++)n[t]=n[t-1]-s;return n.push(6),n.reverse()},e.getPositions=function(t){const r=[],a=e.getRowColCoords(t),s=a.length;for(let e=0;e<s;e++)for(let t=0;t<s;t++)0===e&&0===t||0===e&&t===s-1||e===s-1&&0===t||r.push([a[e],a[t]]);return r}}(re)),re),n=function(){if(ae)return se;ae=1;const e=J().getSymbolSize;return se.getPositions=function(t){const r=e(t);return[[0,0],[r-7,0],[0,r-7]]},se}(),l=(ne||(ne=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,r=3,a=40,s=10;function n(t,r,a){switch(t){case e.Patterns.PATTERN000:return(r+a)%2==0;case e.Patterns.PATTERN001:return r%2==0;case e.Patterns.PATTERN010:return a%3==0;case e.Patterns.PATTERN011:return(r+a)%3==0;case e.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(a/3))%2==0;case e.Patterns.PATTERN101:return r*a%2+r*a%3==0;case e.Patterns.PATTERN110:return(r*a%2+r*a%3)%2==0;case e.Patterns.PATTERN111:return(r*a%3+(r+a)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const r=e.size;let a=0,s=0,n=0,l=null,i=null;for(let o=0;o<r;o++){s=n=0,l=i=null;for(let d=0;d<r;d++){let r=e.get(o,d);r===l?s++:(s>=5&&(a+=t+(s-5)),l=r,s=1),r=e.get(d,o),r===i?n++:(n>=5&&(a+=t+(n-5)),i=r,n=1)}s>=5&&(a+=t+(s-5)),n>=5&&(a+=t+(n-5))}return a},e.getPenaltyN2=function(e){const t=e.size;let a=0;for(let r=0;r<t-1;r++)for(let s=0;s<t-1;s++){const t=e.get(r,s)+e.get(r,s+1)+e.get(r+1,s)+e.get(r+1,s+1);4!==t&&0!==t||a++}return a*r},e.getPenaltyN3=function(e){const t=e.size;let r=0,s=0,n=0;for(let a=0;a<t;a++){s=n=0;for(let l=0;l<t;l++)s=s<<1&2047|e.get(a,l),l>=10&&(1488===s||93===s)&&r++,n=n<<1&2047|e.get(l,a),l>=10&&(1488===n||93===n)&&r++}return r*a},e.getPenaltyN4=function(e){let t=0;const r=e.data.length;for(let a=0;a<r;a++)t+=e.data[a];return Math.abs(Math.ceil(100*t/r/5)-10)*s},e.applyMask=function(e,t){const r=t.size;for(let a=0;a<r;a++)for(let s=0;s<r;s++)t.isReserved(s,a)||t.xor(s,a,n(e,s,a))},e.getBestMask=function(t,r){const a=Object.keys(e.Patterns).length;let s=0,n=1/0;for(let l=0;l<a;l++){r(l),e.applyMask(l,t);const a=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(l,t),a<n&&(n=a,s=l)}return s}}(le)),le),i=de(),o=function(){if(xe)return ue;xe=1;const e=be();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(t){this.degree=t,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const a=e.mod(r,this.genPoly),s=this.degree-a.length;if(s>0){const e=new Uint8Array(this.degree);return e.set(a,s),e}return a},ue=t}(),d=Ee(),c=function(){if(Re)return Se;Re=1;const e=J(),t=e.getBCHDigit(1335);return Se.getEncodedBits=function(r,a){const s=r.bit<<3|a;let n=s<<10;for(;e.getBCHDigit(n)-t>=0;)n^=1335<<e.getBCHDigit(n)-t;return 21522^(s<<10|n)},Se}(),g=Te(),u=Ke();function x(e,t,r){const a=e.size,s=c.getEncodedBits(t,r);let n,l;for(n=0;n<15;n++)l=1==(s>>n&1),n<6?e.set(n,8,l,!0):n<8?e.set(n+1,8,l,!0):e.set(a-15+n,8,l,!0),n<8?e.set(8,a-n-1,l,!0):n<9?e.set(8,15-n-1+1,l,!0):e.set(8,15-n-1,l,!0);e.set(a-8,8,1,!0)}function m(t,a,s){const n=new r;s.forEach(function(e){n.put(e.mode.bit,4),n.put(e.getLength(),g.getCharCountIndicator(e.mode,t)),e.write(n)});const l=8*(e.getSymbolTotalCodewords(t)-i.getTotalCodewordsCount(t,a));for(n.getLengthInBits()+4<=l&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);const d=(l-n.getLengthInBits())/8;for(let e=0;e<d;e++)n.put(e%2?17:236,8);return function(t,r,a){const s=e.getSymbolTotalCodewords(r),n=i.getTotalCodewordsCount(r,a),l=s-n,d=i.getBlocksCount(r,a),c=s%d,g=d-c,u=Math.floor(s/d),x=Math.floor(l/d),m=x+1,h=u-x,b=new o(h);let p=0;const f=new Array(d),y=new Array(d);let k=0;const v=new Uint8Array(t.buffer);for(let e=0;e<d;e++){const t=e<g?x:m;f[e]=v.slice(p,p+t),y[e]=b.encode(f[e]),p+=t,k=Math.max(k,t)}const j=new Uint8Array(s);let w,N,C=0;for(w=0;w<k;w++)for(N=0;N<d;N++)w<f[N].length&&(j[C++]=f[N][w]);for(w=0;w<h;w++)for(N=0;N<d;N++)j[C++]=y[N][w];return j}(n,t,a)}function h(t,r,i,o){let c;if(Array.isArray(t))c=u.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let e=r;if(!e){const r=u.rawSplit(t);e=d.getBestVersionForData(r,i)}c=u.fromString(t,e||40)}}const g=d.getBestVersionForData(c,i);if(!g)throw new Error("The amount of data is too big to be stored in a QR Code");if(r){if(r<g)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+g+".\n")}else r=g;const h=m(r,i,c),b=e.getSymbolSize(r),p=new a(b);return function(e,t){const r=e.size,a=n.getPositions(t);for(let s=0;s<a.length;s++){const t=a[s][0],n=a[s][1];for(let a=-1;a<=7;a++)if(!(t+a<=-1||r<=t+a))for(let s=-1;s<=7;s++)n+s<=-1||r<=n+s||(a>=0&&a<=6&&(0===s||6===s)||s>=0&&s<=6&&(0===a||6===a)||a>=2&&a<=4&&s>=2&&s<=4?e.set(t+a,n+s,!0,!0):e.set(t+a,n+s,!1,!0))}}(p,r),function(e){const t=e.size;for(let r=8;r<t-8;r++){const t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(p),function(e,t){const r=s.getPositions(t);for(let a=0;a<r.length;a++){const t=r[a][0],s=r[a][1];for(let r=-2;r<=2;r++)for(let a=-2;a<=2;a++)-2===r||2===r||-2===a||2===a||0===r&&0===a?e.set(t+r,s+a,!0,!0):e.set(t+r,s+a,!1,!0)}}(p,r),x(p,i,0),r>=7&&function(e,t){const r=e.size,a=d.getEncodedBits(t);let s,n,l;for(let i=0;i<18;i++)s=Math.floor(i/3),n=i%3+r-8-3,l=1==(a>>i&1),e.set(s,n,l,!0),e.set(n,s,l,!0)}(p,r),function(e,t){const r=e.size;let a=-1,s=r-1,n=7,l=0;for(let i=r-1;i>0;i-=2)for(6===i&&i--;;){for(let r=0;r<2;r++)if(!e.isReserved(s,i-r)){let a=!1;l<t.length&&(a=1==(t[l]>>>n&1)),e.set(s,i-r,a),n--,-1===n&&(l++,n=7)}if(s+=a,s<0||r<=s){s-=a,a=-a;break}}}(p,h),isNaN(o)&&(o=l.getBestMask(p,x.bind(null,p,i))),l.applyMask(o,p),x(p,i,o),{modules:p,version:r,errorCorrectionLevel:i,maskPattern:o,segments:c}}return Y.create=function(r,a){if(void 0===r||""===r)throw new Error("No input text");let s,n,i=t.M;return void 0!==a&&(i=t.from(a.errorCorrectionLevel,t.M),s=d.from(a.version),n=l.from(a.maskPattern),a.toSJISFunc&&e.setToSJISFunction(a.toSJISFunc)),h(r,s,i,n)},Y}var Ge,Je,_e={},Qe={};function qe(){return Ge||(Ge=1,function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const r=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,a=e.width&&e.width>=21?e.width:void 0,s=e.scale||4;return{width:a,scale:a?4:s,margin:r,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,r){const a=e.getScale(t,r);return Math.floor((t+2*r.margin)*a)},e.qrToImageData=function(t,r,a){const s=r.modules.size,n=r.modules.data,l=e.getScale(s,a),i=Math.floor((s+2*a.margin)*l),o=a.margin*l,d=[a.color.light,a.color.dark];for(let e=0;e<i;e++)for(let r=0;r<i;r++){let c=4*(e*i+r),g=a.color.light;if(e>=o&&r>=o&&e<i-o&&r<i-o){g=d[n[Math.floor((e-o)/l)*s+Math.floor((r-o)/l)]?1:0]}t[c++]=g.r,t[c++]=g.g,t[c++]=g.b,t[c]=g.a}}}(Qe)),Qe}function We(){return Je||(Je=1,function(e){const t=qe();e.render=function(e,r,a){let s=a,n=r;void 0!==s||r&&r.getContext||(s=r,r=void 0),r||(n=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),s=t.getOptions(s);const l=t.getImageWidth(e.modules.size,s),i=n.getContext("2d"),o=i.createImageData(l,l);return t.qrToImageData(o.data,e,s),function(e,t,r){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=r,t.width=r,t.style.height=r+"px",t.style.width=r+"px"}(i,n,l),i.putImageData(o,0,0),n},e.renderToDataURL=function(t,r,a){let s=a;void 0!==s||r&&r.getContext||(s=r,r=void 0),s||(s={});const n=e.render(t,r,s),l=s.type||"image/png",i=s.rendererOpts||{};return n.toDataURL(l,i.quality)}}(_e)),_e}var Ze,Xe,et={};function tt(){if(Ze)return et;Ze=1;const e=qe();function t(e,t){const r=e.a/255,a=t+'="'+e.hex+'"';return r<1?a+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':a}function r(e,t,r){let a=e+t;return void 0!==r&&(a+=" "+r),a}return et.render=function(a,s,n){const l=e.getOptions(s),i=a.modules.size,o=a.modules.data,d=i+2*l.margin,c=l.color.light.a?"<path "+t(l.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",g="<path "+t(l.color.dark,"stroke")+' d="'+function(e,t,a){let s="",n=0,l=!1,i=0;for(let o=0;o<e.length;o++){const d=Math.floor(o%t),c=Math.floor(o/t);d||l||(l=!0),e[o]?(i++,o>0&&d>0&&e[o-1]||(s+=l?r("M",d+a,.5+c+a):r("m",n,0),n=0,l=!1),d+1<t&&e[o+1]||(s+=r("h",i),i=0)):n++}return s}(o,i,l.margin)+'"/>',u='viewBox="0 0 '+d+" "+d+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+g+"</svg>\n";return"function"==typeof n&&n(null,x),x},et}const rt=e(function(){if(Xe)return $;Xe=1;const e=H?V:(H=1,V=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}),t=Ye(),r=We(),a=tt();function s(r,a,s,n,l){const i=[].slice.call(arguments,1),o=i.length,d="function"==typeof i[o-1];if(!d&&!e())throw new Error("Callback required as last argument");if(!d){if(o<1)throw new Error("Too few arguments provided");return 1===o?(s=a,a=n=void 0):2!==o||a.getContext||(n=s,s=a,a=void 0),new Promise(function(e,l){try{const l=t.create(s,n);e(r(l,a,n))}catch(i){l(i)}})}if(o<2)throw new Error("Too few arguments provided");2===o?(l=s,s=a,a=n=void 0):3===o&&(a.getContext&&void 0===l?(l=n,n=void 0):(l=n,n=s,s=a,a=void 0));try{const e=t.create(s,n);l(null,r(e,a,n))}catch(c){l(c)}}return $.create=t.create,$.toCanvas=s.bind(null,r.render),$.toDataURL=s.bind(null,r.renderToDataURL),$.toString=s.bind(null,function(e,t,r){return a.render(e,r)}),$}());function at({loading:e,children:r,...a}){return t.jsx("button",{...a,disabled:e||a.disabled,children:e?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):r})}function st({linkData:e,setLinkData:o,editingLink:d,errors:c}){const[g,u]=r.useState(e.tags||[]),[x,m]=r.useState(""),[h,b]=r.useState(!1),[p,f]=r.useState(!1);return t.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5 sm:mb-2",children:[t.jsx(a,{className:"inline w-4 h-4 mr-1"}),"Original URL *"]}),t.jsx("input",{type:"url",value:e.originalUrl||"",onChange:t=>o({...e,originalUrl:t.target.value}),placeholder:"https://example.com/your-long-url",autoComplete:"off",className:`w-full px-4 py-3 min-h-[48px] text-base bg-white dark:bg-slate-800 border-2 rounded-xl transition-all outline-none focus:ring-2 focus:ring-blue-500/50 ${c.originalUrl?"border-red-500/50 bg-red-50/10":"border-slate-200 dark:border-slate-700 focus:border-blue-500"} dark:text-white`,required:!0}),c.originalUrl&&t.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.originalUrl})]}),!d&&t.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:[t.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5 sm:mb-2",children:"Custom Alias (Optional)"}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[t.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium bg-slate-100 dark:bg-slate-800 px-3 py-2.5 rounded-xl border-2 border-transparent truncate sm:max-w-[200px]",children:[P,"/"]}),t.jsx("input",{type:"text",value:e.customAlias||"",onChange:t=>o({...e,customAlias:t.target.value}),placeholder:"my-custom-link",autoComplete:"off",className:`w-full sm:flex-1 px-4 py-3 min-h-[48px] text-base bg-white dark:bg-slate-800 border-2 rounded-xl transition-all outline-none focus:ring-2 focus:ring-blue-500/50 ${c.customAlias?"border-red-500/50 bg-red-50/10":"border-slate-200 dark:border-slate-700 focus:border-blue-500"} dark:text-white`})]}),c.customAlias&&t.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.customAlias})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5 sm:mb-2",children:[t.jsx(s,{className:"inline w-4 h-4 mr-1"}),"Title"]}),t.jsx("input",{type:"text",value:e.title||"",onChange:t=>o({...e,title:t.target.value}),placeholder:"My Campaign Link",autoComplete:"off",maxLength:200,className:"w-full px-4 py-3 min-h-[48px] text-base bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-xl transition-all outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 dark:text-white"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5 sm:mb-2",children:[t.jsx(s,{className:"inline w-4 h-4 mr-1"}),"Description"]}),t.jsx("textarea",{value:e.description||"",onChange:t=>o({...e,description:t.target.value}),placeholder:"Add notes about this link...",autoComplete:"off",rows:2,maxLength:1e3,className:"w-full px-4 py-3 min-h-[80px] sm:min-h-[96px] text-base bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-xl transition-all outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 dark:text-white resize-none sm:resize-y"}),t.jsxs("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400 text-right",children:[e.description?.length||0,"/1000"]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5 sm:mb-2",children:[t.jsx(n,{className:"inline w-4 h-4 mr-1"}),"Tags (Optional)"]}),t.jsxs("div",{className:"flex flex-wrap gap-2 p-3 min-h-[48px] bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-xl transition-all focus-within:ring-2 focus-within:ring-blue-500/50 focus-within:border-blue-500",children:[g.map((r,a)=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium border border-blue-200/50 dark:border-blue-700/50",children:[r,t.jsx("button",{type:"button",onClick:()=>(t=>{const r=g.filter(e=>e!==t);u(r),o({...e,tags:r})})(r),className:"hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-1 min-w-[28px] min-h-[28px] flex items-center justify-center transition-colors touch-manipulation","aria-label":`Remove tag ${r}`,children:t.jsx(l,{className:"w-3.5 h-3.5"})})]},a)),t.jsx("input",{type:"text",value:x,onChange:t=>{const r=t.target.value;if(r.endsWith(",")||r.endsWith(" ")){const t=r.slice(0,-1).trim();if(t&&!g.includes(t)){const r=[...g,t];u(r),o({...e,tags:r}),m("")}}else m(r)},onKeyDown:t=>{if("Enter"===t.key){t.preventDefault();const r=x.trim();if(r&&!g.includes(r)){const t=[...g,r];u(t),o({...e,tags:t}),m("")}}else if("Backspace"===t.key&&!x&&g.length>0){const t=g.slice(0,-1);u(t),o({...e,tags:t})}},placeholder:0===g.length?"Add tags...":"",autoComplete:"off",className:"flex-1 min-w-[100px] outline-none bg-transparent dark:text-white text-base"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1.5 sm:mb-2",children:[t.jsx(i,{className:"inline w-4 h-4 mr-1"}),"Expiration Date (Optional)"]}),t.jsx("input",{type:"datetime-local",value:e.expiresAt||"",onChange:t=>o({...e,expiresAt:t.target.value}),className:"w-full px-4 py-3 min-h-[48px] text-base bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-xl transition-all outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 dark:text-white dark:[color-scheme:dark]"})]}),t.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 pt-3 mt-3 sm:pt-4 sm:mt-4",children:[t.jsxs("button",{type:"button",onClick:()=>b(!h),className:"w-full flex items-center justify-between p-3 min-h-[48px] bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-all group touch-manipulation","aria-expanded":h,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center text-sm shadow-inner",children:"ðŸ“Š"}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"text-xs font-bold text-slate-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:"UTM Parameters"}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Campaign tracking (Optional)"})]})]}),t.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center transition-all text-xs "+(h?"bg-blue-600 text-white rotate-180 shadow-lg shadow-blue-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400"),children:"â–¼"})]}),h&&t.jsxs("div",{className:"space-y-3 p-3 mt-2 bg-slate-50/50 dark:bg-slate-900/50 rounded-xl border border-slate-100 dark:border-slate-800 animate-in fade-in slide-in-from-top-2 duration-300",children:[t.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200/50 dark:border-amber-800/50 rounded-lg p-2",children:t.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200 flex gap-2",children:[t.jsx("span",{className:"shrink-0",children:"ðŸ’¡"}),t.jsx("span",{children:"Leave empty if you don't use Google Analytics."})]})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:"Source"}),t.jsx("input",{type:"text",value:e.utmSource||"",onChange:t=>o({...e,utmSource:t.target.value}),placeholder:"e.g. facebook",autoComplete:"off",className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-lg transition-all outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 dark:text-white text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:"Medium"}),t.jsx("input",{type:"text",value:e.utmMedium||"",onChange:t=>o({...e,utmMedium:t.target.value}),placeholder:"e.g. cpc",autoComplete:"off",className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-lg transition-all outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 dark:text-white text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 uppercase tracking-wider",children:"Campaign"}),t.jsx("input",{type:"text",value:e.utmCampaign||"",onChange:t=>o({...e,utmCampaign:t.target.value}),placeholder:"e.g. summer_sale",autoComplete:"off",className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-lg transition-all outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 dark:text-white text-sm"})]})]})]})]})]})}function nt({linkData:e,setLinkData:r,errors:a,addVariant:s,removeVariant:n,updateVariant:l,existingWinner:i}){const p=(e.abTest?.variants||[]).reduce((e,t)=>e+(parseFloat(t.weight)||0),0),f=e=>e.name&&e.name.trim()&&e.url&&e.url.trim();return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/10 dark:to-indigo-900/10 rounded-xl border-2 border-purple-200 dark:border-purple-800/30",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-600 flex items-center justify-center",children:t.jsx(o,{className:"w-7 h-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-lg",children:"A/B Testing"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Test multiple destinations to find the best performer"})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.abTest?.enabled||!1,onChange:t=>{const a=t.target.checked;r({...e,abTest:{...e.abTest,enabled:a,variants:!a||e.abTest?.variants&&0!==e.abTest.variants.length?e.abTest?.variants||[]:[{name:"Variant A",url:"",weight:50},{name:"Variant B",url:"",weight:50}]}})},className:"sr-only peer"}),t.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.abTest?.enabled&&t.jsxs("div",{className:"space-y-6",children:[i&&t.jsxs("div",{className:"p-5 bg-gradient-to-r from-yellow-50 via-amber-50 to-orange-50 dark:from-yellow-900/20 dark:via-amber-900/20 dark:to-orange-900/20 border-2 border-yellow-400 dark:border-yellow-700 rounded-xl shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-500 flex items-center justify-center",children:t.jsx(d,{className:"w-6 h-6 text-white"})}),t.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:"ðŸ† Current Winner"})]}),t.jsxs("div",{className:"ml-13 space-y-2 bg-white/50 dark:bg-gray-800/50 p-4 rounded-lg",children:[t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("span",{className:"font-semibold",children:"Variant:"})," ",t.jsx("span",{className:"font-bold text-purple-700 dark:text-purple-400",children:i.name||`Variant ${String.fromCharCode(65+i.variantIndex)}`})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("span",{className:"font-semibold",children:"Confidence:"})," ",t.jsxs("span",{className:"font-bold text-green-700 dark:text-green-400",children:[i.confidence,"%"]})]}),t.jsx("div",{className:"pt-2 border-t border-yellow-200 dark:border-yellow-800",children:t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"ðŸ’¡ The winning variant has been automatically given higher weight"})})]})]}),t.jsxs("div",{className:"p-5 bg-gray-50 dark:bg-gray-800/50 rounded-xl border-2 border-gray-200 dark:border-gray-700",children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[t.jsx(c,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Split Method"]}),t.jsxs("select",{value:e.abTest.splitMethod||"weighted",onChange:t=>r({...e,abTest:{...e.abTest,splitMethod:t.target.value}}),className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm font-medium",children:[t.jsx("option",{value:"weighted",children:"âš–ï¸ Weighted Split (Manual Control)"}),t.jsx("option",{value:"random",children:"ðŸŽ² Random Split (Equal Distribution)"}),t.jsx("option",{value:"optimized",children:"ðŸ¤– Optimized Split (AI-Powered)"})]}),t.jsx("div",{className:"mt-3 p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:["weighted"===e.abTest.splitMethod&&t.jsxs(t.Fragment,{children:[t.jsx("strong",{className:"text-purple-700 dark:text-purple-400",children:"âš–ï¸ Weighted:"})," You manually control the traffic percentage for each variant using sliders below."]}),"random"===e.abTest.splitMethod&&t.jsxs(t.Fragment,{children:[t.jsx("strong",{className:"text-blue-700 dark:text-blue-400",children:"ðŸŽ² Random:"})," Traffic is distributed randomly and equally across all variants automatically."]}),"optimized"===e.abTest.splitMethod&&t.jsxs(t.Fragment,{children:[t.jsx("strong",{className:"text-green-700 dark:text-green-400",children:"ðŸ¤– Optimized:"})," AI automatically sends more traffic to better-performing variants in real-time."]})]})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("label",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(o,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"}),"Variants (",e.abTest.variants?.length||0,")"]}),t.jsxs("button",{type:"button",onClick:s,className:"px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-bold transition flex items-center gap-2 shadow-lg hover:shadow-xl",children:[t.jsx(g,{className:"w-5 h-5"}),"Add Variant"]})]}),t.jsx("div",{className:"space-y-4",children:(e.abTest.variants||[]).map((r,s)=>{const o=!r.name||!r.name.trim(),c=!r.url||!r.url.trim(),g=o||c,b=String.fromCharCode(65+s),y=p>0?((r.weight||0)/p*100).toFixed(1):0;return t.jsxs("div",{className:"p-5 rounded-xl border-2 transition-all "+(g&&a.abTest?"bg-red-50 dark:bg-red-900/10 border-red-400 dark:border-red-700 shadow-lg":"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border-gray-300 dark:border-gray-600 hover:shadow-lg"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 to-indigo-600 text-white font-bold text-lg shadow-lg",children:b}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-bold text-gray-900 dark:text-white text-lg block",children:["Variant ",b]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i?.variantIndex===s&&t.jsxs("span",{className:"px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 text-xs font-bold rounded-full flex items-center gap-1",children:[t.jsx(d,{className:"w-3 h-3"}),"Winner"]}),g&&a.abTest&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300 text-xs font-bold rounded-full flex items-center gap-1",children:[t.jsx(u,{className:"w-3 h-3"}),"Incomplete"]}),f(r)&&!g&&t.jsxs("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 text-xs font-bold rounded-full flex items-center gap-1",children:[t.jsx(x,{className:"w-3 h-3"}),"Ready"]})]})]})]}),t.jsx("button",{type:"button",onClick:()=>n(s),className:"p-2.5 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg transition",children:t.jsx(m,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:["Variant Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:r.name||"",onChange:e=>l(s,"name",e.target.value),placeholder:'e.g., "Homepage", "Landing Page A"',className:"w-full px-4 py-3 border-2 rounded-lg dark:bg-gray-700 dark:text-white text-sm font-medium "+(o&&a.abTest?"border-red-500 dark:border-red-400 ring-2 ring-red-200 dark:ring-red-900/50":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-2 focus:ring-purple-200")}),o&&a.abTest&&t.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2 flex items-center gap-1 font-medium",children:[t.jsx(u,{className:"w-3.5 h-3.5"}),"Name is required"]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:["Destination URL ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"url",value:r.url||"",onChange:e=>l(s,"url",e.target.value),placeholder:"https://example.com/your-page",className:"w-full px-4 py-3 border-2 rounded-lg dark:bg-gray-700 dark:text-white text-sm font-medium "+(c&&a.abTest?"border-red-500 dark:border-red-400 ring-2 ring-red-200 dark:ring-red-900/50":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-2 focus:ring-purple-200")}),c&&a.abTest&&t.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2 flex items-center gap-1 font-medium",children:[t.jsx(u,{className:"w-3.5 h-3.5"}),"URL is required (must start with http:// or https://)"]})]}),"weighted"===e.abTest.splitMethod&&t.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-purple-200 dark:border-purple-800",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[t.jsx(h,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),"Traffic Weight"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[r.weight||0,"%"]}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",y,"% actual)"]})]})]}),t.jsx("input",{type:"range",min:"0",max:"100",value:r.weight||0,onChange:e=>l(s,"weight",parseFloat(e.target.value)),className:"w-full h-3 bg-gradient-to-r from-purple-200 to-purple-400 rounded-lg appearance-none cursor-pointer accent-purple-600 hover:accent-purple-700 transition",style:{background:`linear-gradient(to right, #9333ea 0%, #9333ea ${r.weight||0}%, #e5e7eb ${r.weight||0}%, #e5e7eb 100%)`}}),t.jsx("div",{className:"mt-3 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-indigo-600 transition-all duration-300",style:{width:`${y}%`}})}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 font-medium",children:y>0?`This variant will receive ${y}% of total traffic`:"No traffic will be sent to this variant"})]})]})]},s)})}),(!e.abTest.variants||0===e.abTest.variants.length)&&t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-2 border-yellow-300 dark:border-yellow-700 rounded-xl p-6 text-center",children:[t.jsx(u,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400 mx-auto mb-3"}),t.jsx("p",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200 mb-1",children:"No Variants Yet"}),t.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:'Click "Add Variant" to create your first test variant'})]}),"weighted"===e.abTest.splitMethod&&e.abTest.variants&&e.abTest.variants.length>0&&t.jsxs("div",{className:"mt-5 p-5 rounded-xl border-2 shadow-lg "+(Math.abs(p-100)<1?"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/10 dark:to-emerald-900/10 border-green-400 dark:border-green-700":"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/10 dark:to-orange-900/10 border-yellow-400 dark:border-yellow-700"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[t.jsx(h,{className:"w-5 h-5"}),"Total Weight Distribution:"]}),t.jsxs("span",{className:"text-3xl font-bold "+(Math.abs(p-100)<1?"text-green-600 dark:text-green-400":"text-yellow-600 dark:text-yellow-400"),children:[p.toFixed(1),"%"]})]}),t.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-3",children:t.jsx("div",{className:"h-full transition-all duration-300 "+(Math.abs(p-100)<1?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-yellow-500 to-orange-500"),style:{width:`${Math.min(p,100)}%`}})}),Math.abs(p-100)>=1&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(u,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-300 font-medium",children:"Weights will be auto-normalized to 100% by the backend, or click the button below to fix now"})]}),t.jsxs("button",{type:"button",onClick:()=>{const t=e.abTest?.variants||[];if(0===t.length)return;const a=Math.floor(100/t.length),s=100-a*t.length,n=t.map((e,t)=>({...e,weight:0===t?a+s:a}));r({...e,abTest:{...e.abTest,variants:n}})},className:"w-full px-4 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white text-sm font-bold rounded-lg transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2",children:[t.jsx(b,{className:"w-5 h-5"}),"Auto-Fix Weights to 100%"]})]}),Math.abs(p-100)<1&&t.jsxs("div",{className:"flex items-center gap-2 text-green-800 dark:text-green-300 bg-green-100 dark:bg-green-900/30 p-3 rounded-lg",children:[t.jsx(x,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-bold",children:"Perfect! Weights are perfectly balanced at 100%"})]})]}),a.abTest&&t.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-400 dark:border-red-700 rounded-xl shadow-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(u,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-red-900 dark:text-red-200 mb-1",children:"A/B Testing Configuration Error"}),t.jsx("p",{className:"text-sm text-red-800 dark:text-red-300",children:a.abTest})]})]})})]}),t.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/10 dark:to-emerald-900/10 rounded-xl border-2 border-green-300 dark:border-green-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-600 flex items-center justify-center",children:t.jsx(b,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-lg",children:"Auto-Optimization"}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"AI-powered winner selection"})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.abTest.autoOptimize?.enabled||!1,onChange:t=>r({...e,abTest:{...e.abTest,autoOptimize:{...e.abTest.autoOptimize||{},enabled:t.target.checked,minSampleSize:e.abTest.autoOptimize?.minSampleSize||100,confidenceLevel:e.abTest.autoOptimize?.confidenceLevel||.95}}}),className:"sr-only peer"}),t.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 dark:peer-focus:ring-green-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all dark:border-gray-600 peer-checked:bg-green-600"})]})]}),e.abTest.autoOptimize?.enabled&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 block",children:"Minimum Sample Size (clicks)"}),t.jsx("input",{type:"number",value:e.abTest.autoOptimize?.minSampleSize||100,onChange:t=>r({...e,abTest:{...e.abTest,autoOptimize:{...e.abTest.autoOptimize,minSampleSize:parseInt(t.target.value)||100}}}),min:"50",max:"1000",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm font-medium focus:border-green-500 focus:ring-2 focus:ring-green-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-2 block",children:"Confidence Level"}),t.jsxs("select",{value:e.abTest.autoOptimize?.confidenceLevel||.95,onChange:t=>r({...e,abTest:{...e.abTest,autoOptimize:{...e.abTest.autoOptimize,confidenceLevel:parseFloat(t.target.value)}}}),className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm font-medium focus:border-green-500 focus:ring-2 focus:ring-green-200",children:[t.jsx("option",{value:"0.90",children:"90% Confidence (Faster Results)"}),t.jsx("option",{value:"0.95",children:"95% Confidence (Balanced)"}),t.jsx("option",{value:"0.99",children:"99% Confidence (Most Accurate)"})]})]}),t.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-green-200 dark:border-green-800",children:t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:[t.jsx("strong",{className:"text-green-700 dark:text-green-400",children:"ðŸ¤– How it works:"}),"After reaching the minimum sample size, the system automatically identifies and promotes winning variants by adjusting traffic distribution in real-time."]})})]})]})]})]})}const lt=[{code:"US",name:"United States",flag:"ðŸ‡ºðŸ‡¸",region:"North America"},{code:"CA",name:"Canada",flag:"ðŸ‡¨ðŸ‡¦",region:"North America"},{code:"MX",name:"Mexico",flag:"ðŸ‡²ðŸ‡½",region:"North America"},{code:"GB",name:"United Kingdom",flag:"ðŸ‡¬ðŸ‡§",region:"Europe"},{code:"DE",name:"Germany",flag:"ðŸ‡©ðŸ‡ª",region:"Europe"},{code:"FR",name:"France",flag:"ðŸ‡«ðŸ‡·",region:"Europe"},{code:"ES",name:"Spain",flag:"ðŸ‡ªðŸ‡¸",region:"Europe"},{code:"IT",name:"Italy",flag:"ðŸ‡®ðŸ‡¹",region:"Europe"},{code:"NL",name:"Netherlands",flag:"ðŸ‡³ðŸ‡±",region:"Europe"},{code:"BE",name:"Belgium",flag:"ðŸ‡§ðŸ‡ª",region:"Europe"},{code:"PT",name:"Portugal",flag:"ðŸ‡µðŸ‡¹",region:"Europe"},{code:"CH",name:"Switzerland",flag:"ðŸ‡¨ðŸ‡­",region:"Europe"},{code:"AT",name:"Austria",flag:"ðŸ‡¦ðŸ‡¹",region:"Europe"},{code:"IE",name:"Ireland",flag:"ðŸ‡®ðŸ‡ª",region:"Europe"},{code:"LU",name:"Luxembourg",flag:"ðŸ‡±ðŸ‡º",region:"Europe"},{code:"SE",name:"Sweden",flag:"ðŸ‡¸ðŸ‡ª",region:"Europe"},{code:"NO",name:"Norway",flag:"ðŸ‡³ðŸ‡´",region:"Europe"},{code:"DK",name:"Denmark",flag:"ðŸ‡©ðŸ‡°",region:"Europe"},{code:"FI",name:"Finland",flag:"ðŸ‡«ðŸ‡®",region:"Europe"},{code:"IS",name:"Iceland",flag:"ðŸ‡®ðŸ‡¸",region:"Europe"},{code:"PL",name:"Poland",flag:"ðŸ‡µðŸ‡±",region:"Europe"},{code:"CZ",name:"Czech Republic",flag:"ðŸ‡¨ðŸ‡¿",region:"Europe"},{code:"HU",name:"Hungary",flag:"ðŸ‡­ðŸ‡º",region:"Europe"},{code:"RO",name:"Romania",flag:"ðŸ‡·ðŸ‡´",region:"Europe"},{code:"BG",name:"Bulgaria",flag:"ðŸ‡§ðŸ‡¬",region:"Europe"},{code:"UA",name:"Ukraine",flag:"ðŸ‡ºðŸ‡¦",region:"Europe"},{code:"RU",name:"Russia",flag:"ðŸ‡·ðŸ‡º",region:"Europe"},{code:"GR",name:"Greece",flag:"ðŸ‡¬ðŸ‡·",region:"Europe"},{code:"HR",name:"Croatia",flag:"ðŸ‡­ðŸ‡·",region:"Europe"},{code:"SI",name:"Slovenia",flag:"ðŸ‡¸ðŸ‡®",region:"Europe"},{code:"BR",name:"Brazil",flag:"ðŸ‡§ðŸ‡·",region:"South America"},{code:"AR",name:"Argentina",flag:"ðŸ‡¦ðŸ‡·",region:"South America"},{code:"CL",name:"Chile",flag:"ðŸ‡¨ðŸ‡±",region:"South America"},{code:"CO",name:"Colombia",flag:"ðŸ‡¨ðŸ‡´",region:"South America"},{code:"PE",name:"Peru",flag:"ðŸ‡µðŸ‡ª",region:"South America"},{code:"VE",name:"Venezuela",flag:"ðŸ‡»ðŸ‡ª",region:"South America"},{code:"EC",name:"Ecuador",flag:"ðŸ‡ªðŸ‡¨",region:"South America"},{code:"BO",name:"Bolivia",flag:"ðŸ‡§ðŸ‡´",region:"South America"},{code:"PY",name:"Paraguay",flag:"ðŸ‡µðŸ‡¾",region:"South America"},{code:"UY",name:"Uruguay",flag:"ðŸ‡ºðŸ‡¾",region:"South America"},{code:"CN",name:"China",flag:"ðŸ‡¨ðŸ‡³",region:"Asia"},{code:"JP",name:"Japan",flag:"ðŸ‡¯ðŸ‡µ",region:"Asia"},{code:"KR",name:"South Korea",flag:"ðŸ‡°ðŸ‡·",region:"Asia"},{code:"TW",name:"Taiwan",flag:"ðŸ‡¹ðŸ‡¼",region:"Asia"},{code:"HK",name:"Hong Kong",flag:"ðŸ‡­ðŸ‡°",region:"Asia"},{code:"SG",name:"Singapore",flag:"ðŸ‡¸ðŸ‡¬",region:"Asia"},{code:"MY",name:"Malaysia",flag:"ðŸ‡²ðŸ‡¾",region:"Asia"},{code:"TH",name:"Thailand",flag:"ðŸ‡¹ðŸ‡­",region:"Asia"},{code:"VN",name:"Vietnam",flag:"ðŸ‡»ðŸ‡³",region:"Asia"},{code:"PH",name:"Philippines",flag:"ðŸ‡µðŸ‡­",region:"Asia"},{code:"ID",name:"Indonesia",flag:"ðŸ‡®ðŸ‡©",region:"Asia"},{code:"IN",name:"India",flag:"ðŸ‡®ðŸ‡³",region:"Asia"},{code:"PK",name:"Pakistan",flag:"ðŸ‡µðŸ‡°",region:"Asia"},{code:"BD",name:"Bangladesh",flag:"ðŸ‡§ðŸ‡©",region:"Asia"},{code:"AE",name:"UAE",flag:"ðŸ‡¦ðŸ‡ª",region:"Middle East"},{code:"SA",name:"Saudi Arabia",flag:"ðŸ‡¸ðŸ‡¦",region:"Middle East"},{code:"QA",name:"Qatar",flag:"ðŸ‡¶ðŸ‡¦",region:"Middle East"},{code:"KW",name:"Kuwait",flag:"ðŸ‡°ðŸ‡¼",region:"Middle East"},{code:"BH",name:"Bahrain",flag:"ðŸ‡§ðŸ‡­",region:"Middle East"},{code:"OM",name:"Oman",flag:"ðŸ‡´ðŸ‡²",region:"Middle East"},{code:"JO",name:"Jordan",flag:"ðŸ‡¯ðŸ‡´",region:"Middle East"},{code:"LB",name:"Lebanon",flag:"ðŸ‡±ðŸ‡§",region:"Middle East"},{code:"IQ",name:"Iraq",flag:"ðŸ‡®ðŸ‡¶",region:"Middle East"},{code:"SY",name:"Syria",flag:"ðŸ‡¸ðŸ‡¾",region:"Middle East"},{code:"YE",name:"Yemen",flag:"ðŸ‡¾ðŸ‡ª",region:"Middle East"},{code:"PS",name:"Palestine",flag:"ðŸ‡µðŸ‡¸",region:"Middle East"},{code:"IL",name:"Israel",flag:"ðŸ‡®ðŸ‡±",region:"Middle East"},{code:"TR",name:"Turkey",flag:"ðŸ‡¹ðŸ‡·",region:"Middle East"},{code:"EG",name:"Egypt",flag:"ðŸ‡ªðŸ‡¬",region:"Africa"},{code:"MA",name:"Morocco",flag:"ðŸ‡²ðŸ‡¦",region:"Africa"},{code:"TN",name:"Tunisia",flag:"ðŸ‡¹ðŸ‡³",region:"Africa"},{code:"DZ",name:"Algeria",flag:"ðŸ‡©ðŸ‡¿",region:"Africa"},{code:"LY",name:"Libya",flag:"ðŸ‡±ðŸ‡¾",region:"Africa"},{code:"SD",name:"Sudan",flag:"ðŸ‡¸ðŸ‡©",region:"Africa"},{code:"ZA",name:"South Africa",flag:"ðŸ‡¿ðŸ‡¦",region:"Africa"},{code:"NG",name:"Nigeria",flag:"ðŸ‡³ðŸ‡¬",region:"Africa"},{code:"KE",name:"Kenya",flag:"ðŸ‡°ðŸ‡ª",region:"Africa"},{code:"GH",name:"Ghana",flag:"ðŸ‡¬ðŸ‡­",region:"Africa"},{code:"ET",name:"Ethiopia",flag:"ðŸ‡ªðŸ‡¹",region:"Africa"},{code:"AU",name:"Australia",flag:"ðŸ‡¦ðŸ‡º",region:"Oceania"},{code:"NZ",name:"New Zealand",flag:"ðŸ‡³ðŸ‡¿",region:"Oceania"}].sort((e,t)=>e.name.localeCompare(t.name));function it({selectedCountries:e,onChange:a,ruleIndex:s}){const[n,i]=r.useState(""),[o,d]=r.useState(!1),c=lt.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.code.toLowerCase().includes(n.toLowerCase())||e.region.toLowerCase().includes(n.toLowerCase())),g=t=>{const r=e.includes(t)?e.filter(e=>e!==t):[...e,t];a(r)},u=e=>{const t=lt.find(t=>t.code===e);return t?`${t.flag} ${t.name}`:e};return t.jsxs("div",{className:"relative",children:[e.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map(e=>t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-lg text-sm font-medium",children:[u(e),t.jsx("button",{type:"button",onClick:()=>g(e),className:"hover:text-blue-900 dark:hover:text-blue-200 ml-1",children:t.jsx(l,{className:"w-3.5 h-3.5"})})]},e))}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:n,onChange:e=>{i(e.target.value),d(!0)},onFocus:()=>d(!0),placeholder:"ðŸ” Search countries...",className:"w-full px-4 py-3 pr-24 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm placeholder-gray-500 dark:placeholder-gray-400"}),e.length>0&&t.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 px-2.5 py-1 bg-blue-600 text-white text-xs font-bold rounded-full",children:e.length})]}),o&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),t.jsx("div",{className:"absolute z-20 w-full mt-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-xl max-h-72 overflow-y-auto",children:c.length>0?t.jsx(t.Fragment,{children:["North America","Europe","South America","Asia","Middle East","Africa","Oceania"].map(r=>{const a=c.filter(e=>e.region===r);return 0===a.length?null:t.jsxs("div",{children:[t.jsx("div",{className:"sticky top-0 px-4 py-2 bg-gray-100 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:t.jsx("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase tracking-wide",children:r})}),a.map(r=>{const a=e.includes(r.code);return t.jsxs("button",{type:"button",onClick:()=>g(r.code),className:"w-full flex items-center justify-between px-4 py-2.5 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition "+(a?"bg-blue-50 dark:bg-blue-900/20":""),children:[t.jsxs("span",{className:"flex items-center gap-2.5",children:[t.jsx("span",{className:"text-xl",children:r.flag}),t.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:r.name}),t.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",r.code,")"]})]}),a&&t.jsx(v,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0"})]},r.code)})]},r)})}):t.jsx("div",{className:"px-4 py-6 text-sm text-gray-500 dark:text-gray-400 text-center",children:"No countries found"})})]})]})}function ot({linkData:e,setLinkData:a,errors:s,addGeoRule:n,removeGeoRule:l,updateGeoRule:o}){const[d,c]=r.useState(!1);return e?t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:t.jsx(p,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Geotargeting"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Redirect users based on their country"})]})]}),t.jsxs("button",{type:"button",onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4"}),"Add Rule"]})]}),t.jsxs("div",{className:"space-y-4",children:[(e.geoRules||[]).map((e,r)=>t.jsxs("div",{className:"p-5 bg-gray-50 dark:bg-gray-700/50 rounded-xl border-2 border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(p,{className:"w-4 h-4"}),"Rule #",r+1]}),t.jsx("button",{type:"button",onClick:()=>l(r),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 rounded transition",title:"Remove rule",children:t.jsx(m,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Target Countries"}),t.jsx(it,{selectedCountries:e.countries||[],onChange:e=>o(r,"countries",e),ruleIndex:r}),t.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Select one or more countries to redirect"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Redirect URL"}),t.jsx("input",{type:"url",value:e.targetUrl||"",onChange:e=>o(r,"targetUrl",e.target.value),placeholder:"https://example.com/country-specific",autoComplete:"off",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Priority (Optional)"}),t.jsx("input",{type:"number",value:e.priority||0,onChange:e=>o(r,"priority",parseInt(e.target.value)||0),min:"0",max:"100",className:"w-32 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Higher priority rules are checked first (0-100)"})]})]})]},r)),(!e.geoRules||0===e.geoRules.length)&&t.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-700/30 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:[t.jsx(p,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"No geo-targeting rules yet"}),t.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Add rules to redirect users based on their country"})]}),s.geoRules&&t.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center gap-2",children:[t.jsx(u,{className:"w-4 h-4"}),s.geoRules]})})]})]}),t.jsxs("div",{className:"sm:block",children:[t.jsxs("button",{type:"button",onClick:()=>c(!d),className:"sm:hidden w-full flex items-center justify-between p-3 min-h-[48px] bg-slate-100 dark:bg-slate-800/80 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-xl transition-all touch-manipulation","aria-expanded":d,children:[t.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:d?"Hide device & schedule":"Device & schedule (optional)"}),d?t.jsx(f,{className:"w-5 h-5 text-slate-500"}):t.jsx(y,{className:"w-5 h-5 text-slate-500"})]}),t.jsxs("div",{className:(d?"block":"hidden")+" sm:block",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:t.jsx(k,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Device Targeting"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Redirect based on device type"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block flex items-center gap-2",children:"ðŸ“± Mobile URL"}),t.jsx("input",{type:"url",value:e.deviceRules?.mobile||"",onChange:t=>a({...e,deviceRules:{...e.deviceRules||{},mobile:t.target.value}}),placeholder:"https://m.example.com",autoComplete:"off",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block flex items-center gap-2",children:"ðŸ’» Desktop URL"}),t.jsx("input",{type:"url",value:e.deviceRules?.desktop||"",onChange:t=>a({...e,deviceRules:{...e.deviceRules||{},desktop:t.target.value}}),placeholder:"https://www.example.com",autoComplete:"off",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block flex items-center gap-2",children:"ðŸ“± Tablet URL"}),t.jsx("input",{type:"url",value:e.deviceRules?.tablet||"",onChange:t=>a({...e,deviceRules:{...e.deviceRules||{},tablet:t.target.value}}),placeholder:"https://tablet.example.com",autoComplete:"off",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 dark:bg-orange-900/10 rounded-lg border border-orange-200 dark:border-orange-800/30 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:t.jsx(i,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Link Scheduling"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Set active time period"})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.schedule?.enabled||!1,onChange:t=>a({...e,schedule:{...e.schedule||{},enabled:t.target.checked}}),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 dark:peer-focus:ring-orange-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-orange-600"})]})]}),e.schedule?.enabled&&t.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"ðŸ• Start Date & Time"}),t.jsx("input",{type:"datetime-local",value:e.schedule?.startDate||"",onChange:t=>a({...e,schedule:{...e.schedule||{},startDate:t.target.value}}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"ðŸ• End Date & Time"}),t.jsx("input",{type:"datetime-local",value:e.schedule?.endDate||"",onChange:t=>a({...e,schedule:{...e.schedule||{},endDate:t.target.value}}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"ðŸ”— Redirect After Expiry (Optional)"}),t.jsx("input",{type:"url",value:e.schedule?.redirectAfterExpiry||"",onChange:t=>a({...e,schedule:{...e.schedule||{},redirectAfterExpiry:t.target.value}}),placeholder:"https://example.com/expired",autoComplete:"off",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Where to redirect users after the link expires"})]}),s.schedule&&t.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center gap-2",children:[t.jsx(u,{className:"w-4 h-4"}),s.schedule]})})]})]})]})]})]}):t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading..."})})}function dt({linkData:e,addPixel:r,removePixel:a,updatePixel:s,errors:n}){if(!e)return t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading tracking settings..."})});if(!r||!a||!s)return t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"text-red-500",children:"Error: Tracking functions not available"})});const l=Array.isArray(e.pixels)?e.pixels:[],i=l.length>0;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:t.jsx(c,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Tracking Pixels"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add conversion tracking pixels"})]})]}),t.jsxs("button",{type:"button",onClick:()=>{try{r()}catch(e){}},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4"}),"Add Pixel"]})]}),t.jsxs("div",{className:"space-y-4",children:[i?l.map((e,r)=>t.jsxs("div",{className:"p-5 bg-gray-50 dark:bg-gray-700/50 rounded-xl border-2 border-gray-200 dark:border-gray-600",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(c,{className:"w-4 h-4"}),"Pixel ",r+1]}),t.jsx("button",{type:"button",onClick:()=>{try{a(r)}catch(e){}},className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 rounded transition",title:"Remove pixel",children:t.jsx(m,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Platform"}),t.jsxs("select",{value:e?.platform||"facebook",onChange:e=>{try{s(r,"platform",e.target.value)}catch(t){}},className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"facebook",children:"Facebook Pixel"}),t.jsx("option",{value:"google",children:"Google Analytics"}),t.jsx("option",{value:"tiktok",children:"TikTok Pixel"}),t.jsx("option",{value:"linkedin",children:"LinkedIn Insight"}),t.jsx("option",{value:"twitter",children:"Twitter Pixel"}),t.jsx("option",{value:"snapchat",children:"Snapchat Pixel"}),t.jsx("option",{value:"pinterest",children:"Pinterest Tag"}),t.jsx("option",{value:"reddit",children:"Reddit Pixel"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Pixel ID"}),t.jsx("input",{type:"text",value:e?.pixelId||"",onChange:e=>{try{s(r,"pixelId",e.target.value)}catch(t){}},placeholder:"Enter your pixel ID",autoComplete:"off",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Example: For Facebook, use your 15-16 digit Pixel ID"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Event Type"}),t.jsxs("select",{value:e?.event||"PageView",onChange:e=>{try{s(r,"event",e.target.value)}catch(t){}},className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"PageView",children:"Page View"}),t.jsx("option",{value:"ViewContent",children:"View Content"}),t.jsx("option",{value:"AddToCart",children:"Add to Cart"}),t.jsx("option",{value:"Purchase",children:"Purchase"}),t.jsx("option",{value:"Lead",children:"Lead"}),t.jsx("option",{value:"CompleteRegistration",children:"Complete Registration"}),t.jsx("option",{value:"InitiateCheckout",children:"Initiate Checkout"}),t.jsx("option",{value:"AddPaymentInfo",children:"Add Payment Info"}),t.jsx("option",{value:"Search",children:"Search"}),t.jsx("option",{value:"Contact",children:"Contact"})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"This event will fire when users click your link"})]})]})]},`pixel-${r}`)):t.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-700/30 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:[t.jsx(c,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"No tracking pixels yet"}),t.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Add pixels to track conversions and events"})]}),n?.pixels&&t.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 flex items-center gap-2",children:[t.jsx(u,{className:"w-4 h-4"}),n.pixels]})})]}),t.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/10 rounded-lg border border-blue-200 dark:border-blue-800/30",children:[t.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[t.jsx(u,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"How Tracking Works"]}),t.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1.5 list-disc list-inside",children:[t.jsx("li",{children:"Pixels fire when users click your link"}),t.jsx("li",{children:"Track conversions in your platform dashboard"}),t.jsx("li",{children:"Use UTM parameters for additional tracking"}),t.jsx("li",{children:"View analytics in the Analytics tab"}),t.jsx("li",{children:"Multiple pixels can be added to one link"})]})]})]})}function ct({linkData:e,setLinkData:a}){const[s,n]=r.useState(!1),[l,i]=r.useState(!1),[o,d]=r.useState(!1),c=r.useRef(null),g=e=>{navigator.clipboard.writeText(e)};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-4 rounded-lg border-2 border-indigo-200 dark:border-indigo-800",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(j,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Custom Domain & Security"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use your own domain for branded links and add password protection"})]})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[t.jsx(j,{className:"inline w-4 h-4 mr-1"}),"Custom Domain (Optional)"]}),t.jsx("input",{type:"text",value:e.customDomain||"",onChange:t=>a({...e,customDomain:t.target.value}),placeholder:"link.yourdomain.com",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"}),t.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["ðŸ’¡ Use your own domain instead of ",P]})]}),e.customDomain&&t.jsxs("button",{type:"button",onClick:()=>n(!s),className:"w-full flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(u,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),t.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"DNS Configuration Instructions"})]}),s?t.jsx(f,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}):t.jsx(y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),e.customDomain&&s&&t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-700 rounded-lg p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Step 1: Add CNAME Record"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Go to your domain's DNS settings and add this CNAME record:"}),t.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded p-3 font-mono text-sm",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Type"}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:"CNAME"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Name"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-900 dark:text-white break-all",children:e.customDomain}),t.jsx("button",{type:"button",onClick:()=>g(e.customDomain),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700",children:t.jsx(w,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400 block text-xs mb-1",children:"Value"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-900 dark:text-white",children:P}),t.jsx("button",{type:"button",onClick:()=>g(P),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700",children:t.jsx(w,{className:"w-4 h-4"})})]})]})]})})]}),t.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(u,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[t.jsx("p",{className:"font-semibold mb-1",children:"DNS Propagation Time"}),t.jsx("p",{children:"It may take up to 48 hours for DNS changes to propagate worldwide."})]})]})}),t.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(x,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"text-sm text-green-800 dark:text-green-200",children:[t.jsx("p",{className:"font-semibold mb-1",children:"SSL Certificate"}),t.jsx("p",{children:"We'll automatically provision an SSL certificate for your custom domain."})]})]})})]}),e.customDomain&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Custom Alias (Optional)"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:["https://",e.customDomain,"/"]}),t.jsx("input",{type:"text",value:e.customAlias||"",onChange:t=>a({...e,customAlias:t.target.value}),placeholder:"my-custom-link",className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"})]}),t.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Leave empty for random short code"})]}),t.jsx("div",{className:"border-t-2 border-gray-200 dark:border-gray-700"}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[t.jsx(N,{className:"inline w-4 h-4 mr-1"}),"Password Protection (Optional)"]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:c,type:l?"text":"password",value:e.password||"",onChange:t=>{const r=t.target.value;a({...e,password:r}),r&&r.length<6?d(!0):d(!1)},onFocus:e=>{e.target.removeAttribute("readonly"),d(!1)},placeholder:"Create a password for this link...",autoComplete:"new-password","data-form-type":"other","data-lpignore":"true",readOnly:!0,className:"w-full px-4 py-3 pr-12 border-2 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white "+(o?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/10":"border-gray-300 dark:border-gray-600")}),t.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:l?t.jsx(C,{className:"w-5 h-5"}):t.jsx(A,{className:"w-5 h-5"})})]}),o&&t.jsxs("div",{className:"mt-2 flex items-start gap-2 text-sm text-yellow-700 dark:text-yellow-400",children:[t.jsx(u,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),t.jsx("p",{children:"Password should be at least 6 characters for better security"})]}),t.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"ðŸ”’ Visitors will need to enter this password to access the link"})]}),t.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border-2 border-indigo-200 dark:border-indigo-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(T,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"text-sm text-indigo-900 dark:text-indigo-100",children:[t.jsx("p",{className:"font-semibold mb-1",children:"Security Tips"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 text-indigo-800 dark:text-indigo-200",children:[t.jsx("li",{children:"Use a strong password (at least 8 characters)"}),t.jsx("li",{children:"Combine letters, numbers, and symbols"}),t.jsx("li",{children:"Don't reuse passwords from other services"})]})]})]})})]})}function gt({show:e,onClose:s,linkData:n,setLinkData:i,editingLink:d,activeTab:g,setActiveTab:u,showAdvancedFeatures:x,setShowAdvancedFeatures:m,handleSubmit:h,submitting:b,errors:p,addVariant:f,removeVariant:v,updateVariant:w,addGeoRule:N,removeGeoRule:C,updateGeoRule:A,addPixel:T,removePixel:E,updatePixel:R}){if(r.useEffect(()=>{if(e){const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[e]),!e)return null;const S=[{id:"basic",label:"Basic",icon:a},{id:"advanced",label:"Advanced",icon:o},{id:"targeting",label:"Targeting",icon:k},{id:"tracking",label:"Tracking",icon:c},{id:"domains",label:"Custom Domain",icon:j}];return t.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"link-modal-title",children:[t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:s,"aria-hidden":"true"}),t.jsx("div",{className:"fixed inset-0 sm:inset-0 sm:p-4 flex items-end sm:items-center justify-center z-50 sm:bg-black/40",children:t.jsxs("div",{className:"bg-gray-900 w-full sm:max-w-3xl sm:rounded-2xl shadow-2xl flex flex-col border-0 sm:border border-gray-800 overflow-hidden h-[88dvh] sm:h-auto sm:max-h-[85vh] safe-bottom",children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4 bg-gray-900 border-b border-gray-800/50 shrink-0 safe-top",children:[t.jsxs("h2",{id:"link-modal-title",className:"text-base sm:text-xl font-bold text-white flex items-center gap-2 truncate min-w-0",children:[t.jsx(a,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:d?"Edit Link":"Create Link"})]}),t.jsx("button",{type:"button",onClick:s,className:"flex-shrink-0 p-2.5 rounded-xl text-gray-400 hover:text-white hover:bg-gray-800 min-h-[44px] min-w-[44px] flex items-center justify-center touch-manipulation","aria-label":"Close",children:t.jsx(l,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),t.jsxs("div",{className:"bg-gray-900/80 border-b border-gray-800/50 shrink-0",children:[t.jsxs("div",{className:"sm:hidden p-3",children:[t.jsx("label",{className:"sr-only",children:"Section"}),t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:g,onChange:e=>u(e.target.value),className:"w-full pl-4 pr-10 py-3 text-base font-semibold rounded-xl border-2 border-gray-700 bg-gray-800 text-white appearance-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none min-h-[48px]","aria-label":"Choose section",children:S.map(e=>t.jsx("option",{value:e.id,children:e.label},e.id))}),t.jsx(y,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none","aria-hidden":"true"})]})]}),t.jsx("div",{className:"hidden sm:block",children:t.jsx("div",{className:"flex gap-2 p-3 sm:p-4 overflow-x-auto scrollbar-hide",children:S.map(e=>{const r=e.icon,a=g===e.id;return t.jsxs("button",{type:"button",onClick:()=>u(e.id),className:`\n                        flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-all duration-200\n                        min-h-[40px]\n                        ${a?"bg-blue-600 text-white shadow-lg shadow-blue-600/30 border border-blue-500":"bg-gray-800/40 text-gray-400 hover:bg-gray-800 hover:text-gray-200 border border-gray-700/50"}\n                      `,children:[t.jsx(r,{className:"w-4 h-4 flex-shrink-0"}),t.jsx("span",{children:e.label})]},e.id)})})})]}),t.jsxs("form",{onSubmit:e=>{e.preventDefault(),h(e)},className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden overscroll-contain bg-gray-900 min-h-0 relative",children:[t.jsx("div",{className:"sticky top-0 z-20 flex justify-end px-2 py-2 sm:hidden bg-gray-900/95 backdrop-blur-sm border-b border-gray-800/50 -mb-px",children:t.jsx("button",{type:"button",onClick:s,className:"p-2.5 rounded-xl text-gray-400 hover:text-white hover:bg-gray-800 min-h-[48px] min-w-[48px] flex items-center justify-center touch-manipulation","aria-label":"Close",children:t.jsx(l,{className:"w-6 h-6"})})}),t.jsxs("div",{className:"px-4 sm:px-6 py-4",children:["basic"===g&&t.jsx(st,{linkData:n,setLinkData:i,editingLink:d,errors:p}),"advanced"===g&&t.jsx(nt,{linkData:n,setLinkData:i,errors:p,addVariant:f,removeVariant:v,updateVariant:w}),"targeting"===g&&t.jsx(ot,{linkData:n,setLinkData:i,errors:p,addGeoRule:N,removeGeoRule:C,updateGeoRule:A}),"tracking"===g&&t.jsx(dt,{linkData:n,addPixel:T,removePixel:E,updatePixel:R,errors:p}),"domains"===g&&t.jsx(ct,{linkData:n,setLinkData:i,errors:p})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 px-4 sm:px-6 py-4 pb-[env(safe-area-inset-bottom)] sm:pb-4 bg-gray-900 border-t border-gray-800/50 shrink-0",children:[t.jsx("button",{type:"button",onClick:s,disabled:b,className:"w-full px-4 py-3 text-sm font-semibold text-gray-400 bg-gray-800/80 hover:bg-gray-800 hover:text-white rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-gray-700/50 hover:border-gray-600 min-h-[48px] touch-manipulation",children:"Cancel"}),t.jsx(at,{type:"submit",loading:b,className:"w-full px-4 py-3 text-sm font-bold text-white bg-blue-600 hover:bg-blue-500 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-600/20 active:scale-[0.98] min-h-[48px] touch-manipulation",children:d?"Save changes":"Create link"})]})]})]})})]})}function ut({selectedQR:e,onClose:r,onDownload:a,onCopy:s}){return e?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:r,children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 max-w-md w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"QR Code"}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition touch-target","aria-label":"Close QR code",children:t.jsx(l,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),t.jsx("div",{className:"bg-white p-4 rounded-lg mb-4 flex items-center justify-center",children:t.jsx("img",{src:e.qrDataUrl,alt:"QR Code",className:"w-full h-auto max-w-[300px]"})}),t.jsx("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400 break-all mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.url}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:a,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all flex items-center justify-center gap-2 touch-target",children:[t.jsx(E,{className:"w-4 h-4"}),"Download"]}),t.jsxs("button",{onClick:()=>s(e.url,e.shortCode),className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-all flex items-center justify-center gap-2 touch-target",children:[t.jsx(w,{className:"w-4 h-4"}),"Copy URL"]})]})]})}):null}function xt({shortCode:e}){const[a,s]=r.useState(!1),[n,l]=r.useState(!1),[i,o]=r.useState(null),[d,g]=r.useState(!1),u=`\x3c!-- Smart Link Conversion Tracking --\x3e\n<script src="${P}/api/conversions/${e}/tracking-code"><\/script>\n\n<script>\n// Track conversion when user completes purchase\ndocument.getElementById('purchase-button').addEventListener('click', function() {\n  smartLinkTrackConversion({\n    value: 99.99,\n    event: 'purchase',\n    callback: function(result) {\n      console.log('Conversion tracked:', result);\n    }\n  });\n});\n<\/script>`;return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:t.jsx(c,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Conversion Tracking"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track purchases, signups, and other conversions"})]})]}),t.jsxs("button",{onClick:()=>s(!a),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center gap-2",children:[t.jsx(R,{className:"w-4 h-4"}),a?"Hide Code":"Get Code"]})]}),i?t.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Conversions"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.totalConversions||0})]}),t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Conversion Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[i.conversionRate||0,"%"]})]}),t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Revenue"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",i.totalRevenue?.toFixed(2)||"0.00"]})]})]}):t.jsx("button",{onClick:async()=>{g(!0);try{const{data:t}=await I.get(`/conversions/${e}/stats`);o(t.stats)}catch(t){}finally{g(!1)}},disabled:d,className:"w-full py-3 mb-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-blue-400 hover:text-blue-600 transition-colors disabled:opacity-50",children:d?"Loading...":"Load Conversion Stats"}),a&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:t.jsx("code",{children:u})}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(u),l(!0),setTimeout(()=>l(!1),2e3)},className:"absolute top-2 right-2 p-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:n?t.jsx(x,{className:"w-4 h-4 text-green-400"}):t.jsx(w,{className:"w-4 h-4 text-gray-400"})})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"How to use:"}),t.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-2 list-decimal list-inside",children:[t.jsx("li",{children:"Add the first script tag to your website's <head>"}),t.jsxs("li",{children:["Call ",t.jsx("code",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/40 rounded",children:"smartLinkTrackConversion()"})," when conversion happens"]}),t.jsxs("li",{children:["Optionally pass ",t.jsx("code",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/40 rounded",children:"value"})," and ",t.jsx("code",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/40 rounded",children:"event"})," parameters"]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Usage Examples:"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Basic conversion:"}),t.jsx("code",{className:"text-sm text-gray-900 dark:text-white",children:"smartLinkTrackConversion();"})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"With value:"}),t.jsxs("code",{className:"text-sm text-gray-900 dark:text-white",children:["smartLinkTrackConversion(","{","value: 29.99","}",");"]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Custom event:"}),t.jsxs("code",{className:"text-sm text-gray-900 dark:text-white",children:["smartLinkTrackConversion(","{","event: 'signup', value: 0","}",");"]})]})]})]})]})]})}function mt({link:e,onEdit:r,onDelete:s,onShowQR:n,onCopy:l,copiedCode:d,onReload:g}){const u=e.shortUrl?e.shortUrl:e.customDomain&&e.domainVerification?.isVerified?`https://${e.customDomain}/${e.customAlias||e.shortCode}`:e.customAlias?`${P}/${e.customAlias}`:`${P}/${e.shortCode}`;return t.jsx("div",{className:"group bg-white dark:bg-slate-900 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 border border-slate-200 dark:border-slate-800 overflow-hidden",children:t.jsxs("div",{className:"relative p-4 sm:p-6",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/5 blur-3xl rounded-full -mr-16 -mt-16 group-hover:bg-blue-500/10 transition-colors"}),t.jsxs("div",{className:"relative flex flex-col sm:flex-row sm:justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:e.title||"Untitled Link"}),e.abTest?.enabled&&t.jsxs("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 text-xs font-semibold rounded-full flex items-center gap-1",children:[t.jsx(o,{className:"w-3 h-3"}),"A/B"]}),e.customDomain&&t.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-semibold rounded-full flex items-center gap-1",children:[t.jsx(p,{className:"w-3 h-3"}),"Custom"]}),e.schedule?.enabled&&t.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-semibold rounded-full flex items-center gap-1",children:[t.jsx(i,{className:"w-3 h-3"}),"Scheduled"]}),e.password&&t.jsxs("span",{className:"px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 text-xs font-semibold rounded-full flex items-center gap-1",children:[t.jsx(N,{className:"w-3 h-3"}),"Protected"]}),(e.geoRules?.length>0||e.deviceRules?.mobile)&&t.jsxs("span",{className:"px-2 py-1 bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-400 text-xs font-semibold rounded-full flex items-center gap-1",children:[t.jsx(b,{className:"w-3 h-3"}),"Smart"]})]}),e.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),e.originalUrl&&t.jsxs("div",{className:"mb-3 text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-1",children:"Original:"}),t.jsx("a",{href:e.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline break-all",children:e.originalUrl})]}),e.abTest?.enabled&&e.abTest.variants?.length>0&&t.jsxs("div",{className:"mb-3 p-3 bg-purple-50 dark:bg-purple-900/10 rounded-lg border border-purple-200 dark:border-purple-800/30",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(o,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),t.jsxs("span",{className:"text-xs font-bold text-purple-700 dark:text-purple-400",children:[e.abTest.variants.length," Variants â€¢ ",e.abTest.splitMethod]})]}),t.jsxs("div",{className:"space-y-1.5",children:[e.abTest.variants.slice(0,2).map((e,r)=>t.jsxs("div",{className:"flex items-center gap-2 text-xs bg-white dark:bg-gray-800/50 px-2.5 py-1.5 rounded",children:[t.jsx("span",{className:"font-semibold text-gray-900 dark:text-white min-w-[60px]",children:e.name}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400 truncate flex-1",children:e.url}),t.jsxs("span",{className:"px-1.5 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded font-bold text-xs",children:[e.weight,"%"]})]},r)),e.abTest.variants.length>2&&t.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 text-center",children:["+",e.abTest.variants.length-2," more"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[t.jsx(a,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 flex-shrink-0"}),t.jsxs("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center gap-1 break-all flex-1 min-w-0 text-sm sm:text-base",children:[u,t.jsx(S,{className:"w-3 h-3 flex-shrink-0"})]}),t.jsx("button",{onClick:()=>l(u,e.shortCode),className:"p-2 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded transition flex-shrink-0 touch-target","aria-label":"Copy link",children:d===e.shortCode?t.jsx(x,{className:"w-4 h-4 text-green-600"}):t.jsx(w,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs sm:text-sm text-gray-500 dark:text-gray-400 flex-wrap",children:[t.jsxs("span",{className:"font-medium flex items-center gap-1",children:[t.jsx(c,{className:"w-3 h-3"}),e.totalClicks," clicks"]}),t.jsx("span",{children:"â€¢"}),t.jsx("span",{children:new Date(e.createdAt).toLocaleDateString()}),e.abTest?.enabled&&e.abTest.winner&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"â€¢"}),t.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["ðŸ† Winner: ",e.abTest.winner.name]})]})]})]}),t.jsxs("div",{className:"flex sm:flex-col gap-2",children:[t.jsx("button",{onClick:()=>r(e),className:"p-2 hover:bg-green-50 dark:hover:bg-green-900/20 text-green-600 dark:text-green-400 rounded transition touch-target",title:"Edit","aria-label":"Edit link",children:t.jsx(L,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>n(e.shortCode),className:"p-2 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition text-gray-700 dark:text-gray-300 touch-target",title:"QR Code","aria-label":"Show QR code",children:t.jsx(M,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>s(e.shortCode),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 rounded transition touch-target",title:"Delete","aria-label":"Delete link",children:t.jsx(m,{className:"w-5 h-5"})})]})]}),e.abTest?.enabled&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:t.jsx(xt,{shortCode:e.shortCode})}),e.customDomain&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:t.jsx(ct,{link:e,onUpdate:g})})]})})}function ht(){const[e,s]=r.useState([]),[n,l]=r.useState(!0),[i,o]=r.useState(!1),[d,c]=r.useState(null),[u,x]=r.useState("basic"),[m,h]=r.useState(!1),{addToast:b}=D(),[p,f]=r.useState({originalUrl:"",title:"",customAlias:"",description:"",tags:[],expiresAt:"",password:"",abTest:{enabled:!1,splitMethod:"weighted",variants:[],autoOptimize:{enabled:!1,minSampleSize:100,confidenceLevel:.95}},geoRules:[],deviceRules:{mobile:"",desktop:"",tablet:""},schedule:{enabled:!1,startDate:"",endDate:"",redirectAfterExpiry:""},pixels:[]}),[y,k]=r.useState({}),[v,j]=r.useState(null),[w,N]=r.useState(null),[C,A]=r.useState(!1);r.useEffect(()=>{T()},[]);const T=async()=>{try{const e=await U();s(e.links)}catch(e){b("Failed to load links","error")}finally{l(!1)}},E=()=>{c(null),f({originalUrl:"",title:"",customAlias:"",description:"",tags:[],expiresAt:"",password:"",abTest:{enabled:!1,splitMethod:"weighted",variants:[],autoOptimize:{enabled:!1,minSampleSize:100,confidenceLevel:.95}},geoRules:[],deviceRules:{mobile:"",desktop:"",tablet:""},schedule:{enabled:!1,startDate:"",endDate:"",redirectAfterExpiry:""},pixels:[]}),k({}),x("basic"),A(!1),o(!0)},R=e=>{c(e),f({originalUrl:e.originalUrl,title:e.title||"",customAlias:"",description:e.description||"",tags:e.tags||[],expiresAt:e.expiresAt?new Date(e.expiresAt).toISOString().slice(0,16):"",password:"",abTest:e.abTest?.enabled?{enabled:!0,splitMethod:e.abTest.splitMethod||"weighted",variants:e.abTest.variants||[],autoOptimize:e.abTest.autoOptimize||{enabled:!1,minSampleSize:100,confidenceLevel:.95}}:{enabled:!1,splitMethod:"weighted",variants:[],autoOptimize:{enabled:!1,minSampleSize:100,confidenceLevel:.95}},geoRules:e.geoRules||[],deviceRules:e.deviceRules||{mobile:"",desktop:"",tablet:""},schedule:e.schedule||{enabled:!1,startDate:"",endDate:"",redirectAfterExpiry:""},pixels:e.pixels||[]}),k({}),x("basic"),A(e.abTest?.enabled||e.geoRules?.length>0||e.deviceRules?.mobile||e.schedule?.enabled||e.pixels?.length>0),o(!0)},S=async e=>{if(confirm("Are you sure you want to delete this link?"))try{await O(e),b("Link deleted successfully","success"),T()}catch(t){b("Failed to delete link","error")}},L=(e,t)=>{navigator.clipboard.writeText(e),j(t),b("Link copied to clipboard!","success"),setTimeout(()=>j(null),2e3)},M=async e=>{try{const t=`${P}/${e}`,r=await rt.toDataURL(t,{width:400,margin:2,color:{dark:"#1e40af",light:"#ffffff"}});N({shortCode:e,url:t,qrDataUrl:r})}catch(t){b("Failed to generate QR code","error")}};return n?t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[t.jsx(F,{}),t.jsx("div",{className:"flex justify-center items-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-blue-500 border-t-transparent mx-auto"}),t.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:"Loading your links..."})]})})]}):t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[t.jsx(F,{}),t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-10 mb-20 md:mb-0",children:[t.jsx("div",{className:"mb-6 sm:mb-8",children:t.jsx("div",{className:"flex flex-col gap-3 sm:gap-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 sm:gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-1 sm:mb-2 tracking-tight",children:"Your links"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"One place for all your short links"})]}),t.jsxs("button",{type:"button",onClick:E,className:"w-full sm:w-auto min-h-[44px] px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-xl text-sm sm:text-base active:scale-[0.98] touch-manipulation",children:[t.jsx(g,{className:"w-4 h-4 sm:w-5 sm:h-5"}),t.jsx("span",{children:"New link"})]})]})})}),e.length>0?t.jsx("div",{className:"grid gap-4 sm:gap-5 md:gap-6",children:e.map(e=>t.jsx(mt,{link:e,onEdit:R,onDelete:S,onShowQR:M,onCopy:L,copiedCode:v,onReload:T},e.shortCode))}):t.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 p-8 sm:p-12 text-center",children:[t.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gray-100 dark:bg-gray-700/80 rounded-2xl flex items-center justify-center mx-auto mb-4",children:t.jsx(a,{className:"w-7 h-7 sm:w-8 sm:h-8 text-gray-500 dark:text-gray-400"})}),t.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No links yet"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-6 max-w-sm mx-auto",children:"Paste a URL and get a short link. You can add targeting and analytics later."}),t.jsxs("button",{type:"button",onClick:E,className:"w-full sm:w-auto min-h-[48px] px-5 sm:px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-xl font-semibold transition-all shadow-lg hover:shadow-xl inline-flex items-center justify-center gap-2 text-sm sm:text-base active:scale-[0.98] touch-manipulation",children:[t.jsx(g,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Create your first link"]})]})]}),i&&t.jsx(gt,{show:i,onClose:()=>o(!1),linkData:p,setLinkData:f,editingLink:d,activeTab:u,setActiveTab:x,showAdvancedFeatures:C,setShowAdvancedFeatures:A,handleSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(!d){const t=p.abTest?.enabled&&p.abTest.variants?.length>=2&&p.abTest.variants.every(e=>e.name?.trim()&&e.url?.trim()),r=p.geoRules&&p.geoRules.some(e=>e.countries?.length>0&&e.targetUrl?.trim()),a=p.deviceRules&&(p.deviceRules.mobile?.trim()||p.deviceRules.desktop?.trim()||p.deviceRules.tablet?.trim()),s=r||a||t,n=(p.originalUrl||"").trim();if(n||s){if(n)try{const t=new URL(n);["http:","https:"].includes(t.protocol)||(e.originalUrl="URL must start with http:// or https://")}catch{e.originalUrl="Invalid URL format. Example: https://example.com"}}else e.originalUrl="Original URL is required (or configure targeting rules)";if(p.customAlias&&p.customAlias.trim()){const t=p.customAlias.trim();/^[a-zA-Z0-9-_]{3,50}$/.test(t)||(e.customAlias="Use 3-50 alphanumeric characters, hyphens, or underscores")}}p.abTest?.enabled&&(!p.abTest.variants||p.abTest.variants.length<2?e.abTest="A/B testing requires at least 2 variants":(p.abTest.variants.filter(e=>{const t=e.name&&e.name.trim().length>0,r=e.url&&e.url.trim().length>0;return!t||!r}).length>0?e.abTest="All variants must have a name and URL":p.abTest.variants.filter(e=>{try{const t=new URL(e.url.trim());return!["http:","https:"].includes(t.protocol)}catch{return!0}}).length>0&&(e.abTest="All variant URLs must be valid (start with http:// or https://)"),"weighted"!==p.abTest.splitMethod||e.abTest||0===p.abTest.variants.reduce((e,t)=>e+(parseFloat(t.weight)||0),0)&&(e.abTest="At least one variant must have weight > 0")));if(p.geoRules&&p.geoRules.length>0){const t=p.geoRules.filter(e=>{const t=e.countries&&e.countries.length>0,r=e.targetUrl&&e.targetUrl.trim().length>0;return t||r});t.length>0&&(t.filter(e=>{const t=e.countries&&e.countries.length>0,r=e.targetUrl&&e.targetUrl.trim().length>0;return!t||!r}).length>0?e.geoRules="Each geo rule must have BOTH countries AND target URL. Please fill both fields or remove the rule.":t.filter(e=>{try{const t=new URL(e.targetUrl.trim());return!["http:","https:"].includes(t.protocol)}catch{return!0}}).length>0&&(e.geoRules="All geo rule URLs must be valid and start with http:// or https://"))}if(p.deviceRules){const t=[{key:"mobile",url:p.deviceRules.mobile},{key:"desktop",url:p.deviceRules.desktop},{key:"tablet",url:p.deviceRules.tablet}].filter(e=>e.url&&e.url.trim().length>0);t.length>0&&t.filter(e=>{try{const t=new URL(e.url.trim());return!["http:","https:"].includes(t.protocol)}catch{return!0}}).length>0&&(e.deviceRules="All device URLs must be valid (start with http:// or https://)")}if(p.schedule?.enabled)if(p.schedule.startDate&&p.schedule.endDate){if(new Date(p.schedule.startDate)>=new Date(p.schedule.endDate)&&(e.schedule="End date must be after start date"),p.schedule.redirectAfterExpiry&&p.schedule.redirectAfterExpiry.trim())try{const t=new URL(p.schedule.redirectAfterExpiry.trim());["http:","https:"].includes(t.protocol)||(e.schedule="Redirect URL must be valid")}catch{e.schedule="Redirect URL must be valid"}}else e.schedule="Start and end dates are required when scheduling is enabled";if(p.pixels&&p.pixels.length>0){const t=p.pixels.filter(e=>e.platform&&e.platform.trim()||e.pixelId&&e.pixelId.trim());t.length>0&&t.filter(e=>{const t=e.platform&&e.platform.trim().length>0,r=e.pixelId&&e.pixelId.trim().length>0;return!t||!r}).length>0&&(e.pixels="All pixels must have both platform and pixel ID")}return k(e),0===Object.keys(e).length})()){h(!0);try{const e={title:(p.title||"").trim(),description:(p.description||"").trim(),tags:p.tags||[],expiresAt:p.expiresAt||null};if(d||(e.originalUrl=p.originalUrl.trim(),p.customAlias&&p.customAlias.trim()&&(e.customAlias=p.customAlias.trim())),p.password&&p.password.trim()&&(e.password=p.password),p.abTest?.enabled&&p.abTest.variants&&p.abTest.variants.length>=2){const t=p.abTest.variants.filter(e=>e.name&&e.name.trim()&&e.url&&e.url.trim()).map(e=>({name:e.name.trim(),url:e.url.trim(),weight:parseFloat(e.weight)||50}));t.length>=2&&(e.abTest={enabled:!0,splitMethod:p.abTest.splitMethod||"weighted",variants:t,autoOptimize:{enabled:p.abTest.autoOptimize?.enabled||!1,minSampleSize:p.abTest.autoOptimize?.minSampleSize||100,confidenceLevel:p.abTest.autoOptimize?.confidenceLevel||.95}})}else d&&(e.abTest={enabled:!1,variants:[]});if(p.geoRules&&p.geoRules.length>0){const t=p.geoRules.filter(e=>e.countries&&e.countries.length>0&&e.targetUrl&&e.targetUrl.trim()).map(e=>({countries:e.countries,targetUrl:e.targetUrl.trim(),priority:e.priority||0}));t.length>0&&(e.geoRules=t)}if(p.deviceRules){(p.deviceRules.mobile&&p.deviceRules.mobile.trim()||p.deviceRules.desktop&&p.deviceRules.desktop.trim()||p.deviceRules.tablet&&p.deviceRules.tablet.trim())&&(e.deviceRules={mobile:p.deviceRules.mobile?.trim()||"",desktop:p.deviceRules.desktop?.trim()||"",tablet:p.deviceRules.tablet?.trim()||""})}if(p.schedule?.enabled&&p.schedule.startDate&&p.schedule.endDate&&(e.schedule={enabled:!0,startDate:p.schedule.startDate,endDate:p.schedule.endDate,redirectAfterExpiry:p.schedule.redirectAfterExpiry?.trim()||""}),p.pixels&&p.pixels.length>0){const t=p.pixels.filter(e=>e.platform&&e.platform.trim()&&e.pixelId&&e.pixelId.trim()).map(e=>({platform:e.platform.trim(),pixelId:e.pixelId.trim(),event:e.event||"PageView"}));t.length>0&&(e.pixels=t)}d?(await B(d.shortCode,e),b("Link updated successfully! ðŸŽ‰","success")):(await z(e),b("Link created successfully! ðŸŽ‰","success")),o(!1),c(null),T()}catch(t){const e=t.response?.data?.error||t.response?.data?.message||t.message||"Failed to save link";if(void 0!==t.response?.data?.variantIndex){const r=t.response.data.variantIndex,a=p.abTest?.variants?.[r]?.name||`Variant ${r+1}`;b(`${a}: ${e}`,"error")}else b(e,"error")}finally{h(!1)}}else b("Please fix all validation errors","error")},submitting:m,errors:y,addVariant:()=>{const e=p.abTest?.variants||[],t=e.length+1,r=Math.floor(100/t),a=100-r*t,s=e.map((e,t)=>({...e,weight:0===t?r+a:r})),n={name:`Variant ${String.fromCharCode(65+e.length)}`,url:"",weight:r};f({...p,abTest:{...p.abTest,variants:[...s,n]}})},removeVariant:e=>{const t=(p.abTest?.variants||[]).filter((t,r)=>r!==e);if(t.length>0){const e=Math.floor(100/t.length),r=100-e*t.length,a=t.map((t,a)=>({...t,weight:0===a?e+r:e}));f({...p,abTest:{...p.abTest,variants:a}})}else f({...p,abTest:{...p.abTest,variants:[]}})},updateVariant:(e,t,r)=>{const a=[...p.abTest?.variants||[]];a[e]&&(a[e]={...a[e],[t]:r},f({...p,abTest:{...p.abTest,variants:a}}))},addGeoRule:()=>{f({...p,geoRules:[...p.geoRules||[],{countries:[],targetUrl:"",priority:0}]})},removeGeoRule:e=>{f({...p,geoRules:(p.geoRules||[]).filter((t,r)=>r!==e)})},updateGeoRule:(e,t,r)=>{const a=[...p.geoRules||[]];a[e][t]=r,f({...p,geoRules:a})},addPixel:()=>{f({...p,pixels:[...p.pixels||[],{platform:"facebook",pixelId:"",event:"PageView"}]})},removePixel:e=>{f({...p,pixels:(p.pixels||[]).filter((t,r)=>r!==e)})},updatePixel:(e,t,r)=>{const a=[...p.pixels||[]];a[e]&&(a[e]={...a[e],[t]:r},f({...p,pixels:a}))}}),w&&t.jsx(ut,{selectedQR:w,onClose:()=>N(null),onDownload:()=>{if(!w)return;const e=document.createElement("a");e.download=`qr-code-${w.shortCode}.png`,e.href=w.qrDataUrl,e.click()},onCopy:L})]})}export{ht as default};
