import{j as e,c as a,G as r,ai as t,aj as s,ak as l,al as i,u as d,b as n,k as o,am as c,an as m,ao as g,ap as x,aq as b,ar as h,as as u,at as p,a4 as f,l as y,X as v,f as j}from"./vendor-BBNOa7qo.js";import{a as w}from"./index-CpGYe4dt.js";import{N as k}from"./Navbar-BT3cOAht.js";const N={default:"bg-[#f3f4f6]",dark:"bg-[#1e1e1e]",blue:"bg-blue-50",gradient:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",midnight:"bg-slate-900"},L={instagram:i,twitter:l,github:s,linkedin:t,website:r,youtube:r,tiktok:r};function C({previewData:t}){if(!t)return null;const s=t.theme||"default",l=N[s]||N.default,i=["dark","midnight","gradient"].includes(s),d=i?"bg-black/20 backdrop-blur-md border-white/10 text-white":"bg-white border-gray-200 text-gray-900";return e.jsxs("div",{className:`min-h-full w-full ${l} transition-colors duration-500 overflow-x-hidden rounded-[2rem] flex flex-col`,children:[e.jsx("div",{className:"h-24 w-full "+(i?"bg-white/5":"bg-gray-200/50")}),e.jsx("div",{className:"px-4 -mt-12 pb-8 flex-1",children:e.jsxs("div",{className:`rounded-3xl shadow-lg p-6 border ${d} text-center relative overflow-hidden`,children:[e.jsx("div",{className:"relative inline-block mb-3",children:e.jsx("div",{className:`w-28 h-28 rounded-full p-1 ${i?"bg-black":"bg-white"} shadow-md mx-auto`,children:t.avatar?e.jsx("img",{src:t.avatar,alt:"Avatar",className:"w-full h-full rounded-full object-cover",onError:e=>{e.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full rounded-full bg-blue-100 flex items-center justify-center text-4xl",children:"ðŸ‘¤"})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight mb-0.5",children:t.displayName||"Your Name"}),e.jsxs("p",{className:"text-sm font-medium "+(i?"text-white/60":"text-gray-500"),children:["@",t.username||"username"]})]}),t.bio&&e.jsx("p",{className:"text-sm leading-relaxed mb-6 "+(i?"text-white/80":"text-gray-600"),children:t.bio}),e.jsx("div",{className:"space-y-2 text-left",children:t.customLinks&&t.customLinks.length>0?t.customLinks.map((r,t)=>e.jsxs("div",{className:"flex items-center p-2.5 rounded-xl border "+(i?"bg-white/5 border-white/10":"bg-gray-50 border-gray-100"),children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-lg mr-3 "+(i?"bg-white/10":"bg-white shadow-sm"),children:r.icon||"ðŸ”—"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-xs truncate",children:r.title||r.url}),e.jsx("p",{className:"text-[10px] truncate "+(i?"text-white/50":"text-gray-400"),children:r.url})]}),e.jsx(a,{className:"w-4 h-4 "+(i?"text-white/20":"text-gray-300")})]},t)):e.jsx("div",{className:"p-4 border-2 border-dashed border-gray-300/50 rounded-xl text-center text-xs text-gray-400",children:"Add verified links"})}),t.socialLinks&&t.socialLinks.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200/20 flex justify-center gap-3",children:t.socialLinks.map((a,t)=>{const s=L[a.platform]||r;return e.jsx("div",{className:"text-gray-400",children:e.jsx(s,{className:"w-5 h-5"})},t)})})]})})]})}const P=w.create({baseURL:"https://smart-link-backend-production.up.railway.app",headers:{"Content-Type":"application/json"}});P.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e});const S=[{id:"default",name:"Gravatar Light",preview:"bg-[#f3f4f6]"},{id:"dark",name:"Dark Mode",preview:"bg-[#1e1e1e]"},{id:"blue",name:"Soft Blue",preview:"bg-blue-50"},{id:"gradient",name:"Gradient",preview:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500"},{id:"midnight",name:"Midnight",preview:"bg-slate-900"}];function A(){d();const[a,r]=n.useState(!0),[t,s]=n.useState(!1),[l,i]=n.useState("identity"),w=n.useRef(null),[N,L]=n.useState(!1),[A,z]=n.useState({username:"",displayName:"",bio:"",avatar:"",theme:"default",socialLinks:[],customLinks:[],isPublic:!0}),[D,R]=n.useState(null),[T,U]=n.useState(!1),I=n.useRef(null);n.useEffect(()=>{M()},[]);const M=async()=>{try{const{data:e}=await P.get("/api/bio/settings");z({username:e.bioPage.username||"",displayName:e.bioPage.displayName||"",bio:e.bioPage.bio||"",avatar:e.bioPage.avatar||"",theme:e.bioPage.theme||"default",socialLinks:e.bioPage.socialLinks||[],customLinks:(e.bioPage.customLinks||[]).map(e=>({...e,id:e._id||Math.random().toString(36).substr(2,9)})),isPublic:void 0===e.bioPage.isPublic||e.bioPage.isPublic})}catch(e){}finally{r(!1)}},$=e=>{const a=e.toLowerCase().replace(/[^a-z0-9_]/g,"");z({...A,username:a}),U(!0),R(null),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{(async e=>{if(!e||e.length<3)return R(null),void U(!1);try{const{data:a}=await P.get(`/api/bio/check-username/${e}`);R(a.available)}catch(a){}finally{U(!1)}})(a)},500)},E=async()=>{if(!A.username||A.username.length<3)return alert("Username too short");if(!1===D)return alert("Username taken");s(!0);try{const e={...A,customLinks:A.customLinks.map((e,a)=>({...e,order:a}))};await P.put("/api/bio/settings",e),alert("Profile updated! ðŸš€")}catch(e){alert("Save failed")}finally{s(!1)}},B=(e,a,r)=>{const t=[...A.customLinks];t[e]={...t[e],[a]:r},z({...A,customLinks:t})};return a?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(o,{className:"animate-spin text-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300 pb-24 lg:pb-0",children:[e.jsx(k,{}),e.jsx("div",{className:"hidden lg:block max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile Editor"}),e.jsxs("button",{onClick:E,disabled:t,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg hover:shadow-blue-500/30 transition-all",children:[t?e.jsx(o,{className:"animate-spin w-4 h-4"}):e.jsx(c,{className:"w-4 h-4"}),"Save Changes"]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 lg:py-0 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"lg:hidden flex bg-white dark:bg-gray-800 p-1.5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6 sticky top-20 z-30",children:[{id:"identity",label:"Identity",icon:m},{id:"links",label:"Links",icon:g},{id:"appearance",label:"Theme",icon:x}].map(a=>e.jsxs("button",{onClick:()=>i(a.id),className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-bold transition-all "+(l===a.id?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))}),e.jsxs("div",{className:("identity"===l?"block":"hidden")+" lg:block bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"font-bold mb-4 text-gray-900 dark:text-white text-lg flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-blue-500"}),"Identity"]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 dark:text-gray-300",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center overflow-hidden relative group cursor-pointer",onClick:()=>w.current?.click(),children:A.avatar?e.jsx("img",{src:A.avatar,className:"w-full h-full object-cover"}):e.jsx(b,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>w.current?.click(),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg text-sm font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Upload Image"}),e.jsx("input",{type:"file",ref:w,onChange:async e=>{const a=e.target.files[0];if(a)if(a.size>5242880)alert("Image too large (Max 5MB)");else try{const e=await(e=>new Promise(a=>{const r=new FileReader;r.readAsDataURL(e),r.onload=e=>{const r=document.createElement("img");r.src=e.target.result,r.onload=()=>{const e=document.createElement("canvas");let t=r.width,s=r.height;const l=500;t>s?t>l&&(s*=l/t,t=l):s>l&&(t*=l/s,s=l),e.width=t,e.height=s,e.getContext("2d").drawImage(r,0,0,t,s),a(e.toDataURL("image/jpeg",.7))}}}))(a);z(a=>({...a,avatar:e}))}catch(r){alert("Failed to process image")}},accept:"image/*",className:"hidden"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Display Name"}),e.jsx("input",{type:"text",value:A.displayName,onChange:e=>z({...A,displayName:e.target.value}),className:"w-full p-2.5 rounded-xl border bg-gray-50 dark:bg-gray-700 dark:text-white dark:border-gray-600",placeholder:"Your Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),e.jsx("input",{type:"text",value:A.username,onChange:e=>$(e.target.value),className:"w-full pl-7 p-2.5 rounded-xl border bg-gray-50 dark:bg-gray-700 dark:text-white dark:border-gray-600",placeholder:"username"})]}),A.username&&e.jsx("p",{className:"text-[10px] mt-1 font-bold "+(D?"text-green-500":"text-red-500"),children:D?"âœ“ Available":"âœ— Taken"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Bio"}),e.jsx("textarea",{value:A.bio,onChange:e=>z({...A,bio:e.target.value}),className:"w-full p-3 rounded-xl border bg-gray-50 dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Tell the world about yourself..."})]})]})]}),e.jsxs("div",{className:("links"===l?"block":"hidden")+" lg:block bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"font-bold text-gray-900 dark:text-white text-lg flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-blue-500"}),"Links"]}),e.jsx("button",{onClick:()=>{z({...A,customLinks:[...A.customLinks,{title:"",url:"",icon:"ðŸ”—",order:A.customLinks.length,isActive:!0,id:Math.random().toString(36).substr(2,9)}]})},className:"text-sm px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg font-bold hover:bg-blue-200 transition-colors",children:"+ Add New"})]}),e.jsx(h,{axis:"y",values:A.customLinks,onReorder:e=>{z({...A,customLinks:e})},className:"space-y-3",children:A.customLinks.map((a,r)=>e.jsx(u,{value:a,children:e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-600 flex items-start gap-3 group hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"mt-2 text-gray-400 cursor-grab active:cursor-grabbing",children:e.jsx(p,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:a.icon,onChange:e=>B(r,"icon",e.target.value),className:"w-12 text-center p-2 rounded-lg border dark:border-gray-600 bg-white dark:bg-gray-800 dark:text-white text-xl",placeholder:"ðŸ”—"}),e.jsx("input",{value:a.title,onChange:e=>B(r,"title",e.target.value),className:"flex-1 p-2 rounded-lg border dark:border-gray-600 bg-white dark:bg-gray-800 dark:text-white font-medium",placeholder:"Link Title"})]}),e.jsx("input",{value:a.url,onChange:e=>B(r,"url",e.target.value),className:"w-full p-2 rounded-lg border dark:border-gray-600 bg-white dark:bg-gray-800 dark:text-white text-sm",placeholder:"https://"})]}),e.jsx("button",{onClick:()=>{return e=r,void z({...A,customLinks:A.customLinks.filter((a,r)=>r!==e)});var e},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(f,{className:"w-5 h-5"})})]})},a.id))})]}),e.jsxs("div",{className:("appearance"===l?"block":"hidden")+" lg:block bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"font-bold mb-4 text-gray-900 dark:text-white text-lg flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-blue-500"}),"Appearance"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-3",children:S.map(a=>e.jsxs("button",{onClick:()=>z({...A,theme:a.id}),className:"group relative p-1 rounded-xl border-2 transition-all "+(A.theme===a.id?"border-blue-500 scale-105":"border-transparent hover:border-gray-200"),children:[e.jsx("div",{className:`h-12 rounded-lg ${a.preview} shadow-sm group-hover:shadow-md transition-shadow`}),e.jsx("p",{className:"text-[10px] text-center mt-1.5 font-medium dark:text-gray-400",children:a.name})]},a.id))})]})]}),e.jsx("div",{className:"hidden lg:block relative",children:e.jsx("div",{className:"sticky top-8",children:e.jsxs("div",{className:"bg-[#121212] rounded-[3.5rem] p-3 border-[10px] border-[#2a2a2a] shadow-2xl relative overflow-hidden max-w-[380px] mx-auto ring-1 ring-black",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-40 h-7 bg-[#2a2a2a] rounded-b-2xl z-20"}),e.jsx("div",{className:"h-[780px] w-full bg-white rounded-[2.5rem] overflow-y-auto no-scrollbar relative",children:e.jsx(C,{previewData:A})})]})})})]}),e.jsx(y,{children:N&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden bg-black/90 backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-900 border-b border-gray-800",children:[e.jsx("h3",{className:"text-white font-bold",children:"Live Preview"}),e.jsx("button",{onClick:()=>L(!1),className:"p-2 bg-gray-800 rounded-full text-white hover:bg-gray-700",children:e.jsx(v,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-900 p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-[380px] h-[80vh] bg-white rounded-[2.5rem] overflow-y-auto no-scrollbar relative border-8 border-gray-800 shadow-2xl",children:e.jsx(C,{previewData:A})})})]})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 p-4 z-40 safe-bottom",children:e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>L(!0),className:"flex-1 py-3 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-bold font-medium flex items-center justify-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Preview"]}),e.jsxs("button",{onClick:E,disabled:t,className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20",children:[t?e.jsx(o,{className:"animate-spin w-5 h-5"}):e.jsx(c,{className:"w-5 h-5"}),"Save Changes"]})]})})]})]})}export{A as default};
