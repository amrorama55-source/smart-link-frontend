import{j as e,G as a,ai as r,aj as s,ak as t,al as l,_ as i,u as d,b as o,l as n,am as c,an as x,ao as m,ap as b,aq as g,ar as u,as as h,at as p,a6 as y,A as f,X as v,f as k}from"./vendor-mINc_jmg.js";import{a as j}from"./index-cjCEeBZf.js";import{N as w}from"./Navbar-BiXqz2xf.js";import{t as N}from"./bioThemes-BoZ2fo38.js";const L={instagram:l,twitter:t,github:s,linkedin:r,website:a,youtube:a,tiktok:a};function C({previewData:r}){if(!r)return null;const s=N[r.theme]||N.default;return e.jsxs("div",{className:"min-h-full w-full transition-colors duration-500 overflow-x-hidden rounded-[2rem] flex flex-col",style:{...s.variables,background:s.variables["--bio-bg"],backdropFilter:s.variables["--bio-backdrop"]||"none"},children:[e.jsx("div",{className:"h-20 w-full opacity-20"}),e.jsxs("div",{className:"px-5 -mt-10 pb-10 flex-1",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"relative inline-block mb-4",children:e.jsx("div",{className:"w-24 h-24 rounded-full p-0.5 bg-white/20 backdrop-blur-sm shadow-xl mx-auto overflow-hidden border-2 border-white/30",children:r.avatar?e.jsx("img",{src:r.avatar,alt:"Avatar",className:"w-full h-full rounded-full object-cover",onError:e=>{e.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full rounded-full bg-blue-100 flex items-center justify-center text-4xl",children:"ðŸ‘¤"})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight mb-0.5",style:{color:"var(--bio-text-primary)"},children:r.displayName||"Your Name"}),e.jsxs("p",{className:"text-sm font-semibold opacity-70",style:{color:"var(--bio-text-secondary)"},children:["@",r.username||"username"]})]}),r.bio&&e.jsx("p",{className:"text-sm leading-relaxed mb-8 px-2 font-medium opacity-90",style:{color:"var(--bio-text-primary)"},children:r.bio}),r.socialLinks&&r.socialLinks.length>0&&e.jsx("div",{className:"flex justify-center flex-wrap gap-3 mb-8",children:r.socialLinks.map((r,s)=>{const t=L[r.platform]||a;return e.jsx("div",{className:"p-2.5 rounded-full shadow-sm transition-transform hover:scale-110",style:{backgroundColor:"var(--bio-link-bg)",color:"var(--bio-text-primary)"},children:e.jsx(t,{className:"w-4 h-4"})},s)})})]}),e.jsx("div",{className:"space-y-3",children:r.customLinks&&r.customLinks.length>0?r.customLinks.map((a,r)=>e.jsxs("div",{className:"flex items-center px-4 py-3.5 rounded-2xl border-2 shadow-md transition-all",style:{backgroundColor:"var(--bio-link-bg)",borderColor:"var(--bio-link-border)",color:"var(--bio-text-primary)"},children:[e.jsx("div",{className:"w-8 flex justify-center text-lg",children:a.icon||"ðŸ”—"}),e.jsx("div",{className:"flex-1 min-w-0 px-2",children:e.jsx("p",{className:"font-bold text-xs truncate",children:a.title||a.url})}),e.jsx(i,{className:"w-4 h-4 opacity-30"})]},r)):e.jsx("div",{className:"p-8 border-2 border-dashed border-gray-400/30 rounded-2xl text-center text-xs text-gray-400 font-medium",children:"No links added yet"})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx("p",{className:"text-[10px] font-bold opacity-40 uppercase tracking-widest",style:{color:"var(--bio-text-primary)"},children:"Smart Link"})})]})]})}const P=j.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"}});P.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e});const S=Object.values(N);function z(){d();const[a,r]=o.useState(!0),[s,t]=o.useState(!1),[l,i]=o.useState("identity"),j=o.useRef(null),[N,L]=o.useState(!1),[z,A]=o.useState({username:"",displayName:"",bio:"",avatar:"",theme:"default",socialLinks:[],customLinks:[],isPublic:!0}),[T,R]=o.useState(null),[U,D]=o.useState(!1),I=o.useRef(null);o.useEffect(()=>{E()},[]);const E=async()=>{try{const{data:e}=await P.get("/api/bio/settings");A({username:e.bioPage.username||"",displayName:e.bioPage.displayName||"",bio:e.bioPage.bio||"",avatar:e.bioPage.avatar||"",theme:e.bioPage.theme||"default",socialLinks:e.bioPage.socialLinks||[],customLinks:(e.bioPage.customLinks||[]).map(e=>({...e,id:e._id||Math.random().toString(36).substr(2,9)})),isPublic:void 0===e.bioPage.isPublic||e.bioPage.isPublic})}catch(e){}finally{r(!1)}},M=e=>{const a=e.toLowerCase().replace(/[^a-z0-9_]/g,"");A({...z,username:a}),D(!0),R(null),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{(async e=>{if(!e||e.length<3)return R(null),void D(!1);try{const{data:a}=await P.get(`/api/bio/check-username/${e}`);R(a.available)}catch(a){}finally{D(!1)}})(a)},500)},B=async()=>{if(!z.username||z.username.length<3)return alert("Username too short");if(!1===T)return alert("Username taken");t(!0);try{const e={...z,customLinks:z.customLinks.map((e,a)=>({...e,order:a}))};await P.put("/api/bio/settings",e),alert("Profile updated! ðŸš€")}catch(e){alert("Save failed")}finally{t(!1)}},F=(e,a,r)=>{const s=[...z.customLinks];s[e]={...s[e],[a]:r},A({...z,customLinks:s})};return a?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[e.jsx(w,{}),e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-blue-500 border-t-transparent mx-auto"}),e.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:"Just a sec..."})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 transition-colors duration-300 pb-24 lg:pb-0",children:[e.jsx(w,{}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-1 tracking-tight",children:"Profile Editor"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Customize your bio page and manage your links"})]}),e.jsxs("button",{onClick:B,disabled:s,className:"hidden sm:flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg hover:shadow-blue-500/30 transition-all",children:[s?e.jsx(n,{className:"animate-spin w-5 h-5"}):e.jsx(c,{className:"w-5 h-5"}),"Save Changes"]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"lg:hidden flex bg-white dark:bg-gray-800/80 p-1.5 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 mb-6 sticky top-20 z-30",children:[{id:"identity",label:"Identity",icon:x},{id:"links",label:"Links",icon:m},{id:"appearance",label:"Theme",icon:b}].map(a=>e.jsxs("button",{onClick:()=>i(a.id),className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-bold transition-all "+(l===a.id?"bg-blue-600 text-white shadow-md":"text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))}),e.jsxs("div",{className:("identity"===l?"block":"hidden")+" lg:block bg-white dark:bg-gray-800/80 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("h2",{className:"font-bold mb-4 text-gray-900 dark:text-white text-lg flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Identity"]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center overflow-hidden relative group cursor-pointer",onClick:()=>j.current?.click(),children:z.avatar?e.jsx("img",{src:z.avatar,className:"w-full h-full object-cover"}):e.jsx(g,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>j.current?.click(),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg text-sm font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Upload Image"}),e.jsx("input",{type:"file",ref:j,onChange:async e=>{const a=e.target.files[0];if(a)if(a.size>5242880)alert("Image too large (Max 5MB)");else try{const e=await(e=>new Promise(a=>{const r=new FileReader;r.readAsDataURL(e),r.onload=e=>{const r=document.createElement("img");r.src=e.target.result,r.onload=()=>{const e=document.createElement("canvas");let s=r.width,t=r.height;const l=500;s>t?s>l&&(t*=l/s,s=l):t>l&&(s*=l/t,t=l),e.width=s,e.height=t,e.getContext("2d").drawImage(r,0,0,s,t),a(e.toDataURL("image/jpeg",.7))}}}))(a);A(a=>({...a,avatar:e}))}catch(r){alert("Failed to process image")}},accept:"image/*",className:"hidden"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Display Name"}),e.jsx("input",{type:"text",value:z.displayName,onChange:e=>A({...z,displayName:e.target.value}),className:"w-full p-2.5 rounded-xl border border-gray-300 bg-white dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Your Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),e.jsx("input",{type:"text",value:z.username,onChange:e=>M(e.target.value),className:"w-full pl-7 p-2.5 rounded-xl border border-gray-300 bg-white dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"username"})]}),z.username&&e.jsx("p",{className:"text-xs mt-1 font-bold "+(T?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:T?"âœ“ Available":"âœ— Taken"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Bio"}),e.jsx("textarea",{value:z.bio,onChange:e=>A({...z,bio:e.target.value}),className:"w-full p-3 rounded-xl border border-gray-300 bg-white dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",rows:3,placeholder:"Tell the world about yourself..."})]})]})]}),e.jsxs("div",{className:("links"===l?"block":"hidden")+" lg:block bg-white dark:bg-gray-800/80 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"font-bold text-gray-900 dark:text-white text-lg flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Links"]}),e.jsx("button",{onClick:()=>{A({...z,customLinks:[...z.customLinks,{title:"",url:"",icon:"ðŸ”—",order:z.customLinks.length,isActive:!0,id:Math.random().toString(36).substr(2,9)}]})},className:"text-sm px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition-colors",children:"+ Add New"})]}),e.jsx(u,{axis:"y",values:z.customLinks,onReorder:e=>{A({...z,customLinks:e})},className:"space-y-3",children:z.customLinks.map((a,r)=>e.jsx(h,{value:a,children:e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-600 flex items-start gap-3 group hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[e.jsx("div",{className:"mt-2 text-gray-400 dark:text-gray-500 cursor-grab active:cursor-grabbing",children:e.jsx(p,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:a.icon,onChange:e=>F(r,"icon",e.target.value),className:"w-12 text-center p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 dark:text-white text-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ðŸ”—"}),e.jsx("input",{value:a.title,onChange:e=>F(r,"title",e.target.value),className:"flex-1 p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Link Title"})]}),e.jsx("input",{value:a.url,onChange:e=>F(r,"url",e.target.value),className:"w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://"})]}),e.jsx("button",{onClick:()=>{return e=r,void A({...z,customLinks:z.customLinks.filter((a,r)=>r!==e)});var e},className:"p-2 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",children:e.jsx(y,{className:"w-5 h-5"})})]})},a.id))})]}),e.jsxs("div",{className:("appearance"===l?"block":"hidden")+" lg:block bg-white dark:bg-gray-800/80 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("h2",{className:"font-bold mb-4 text-gray-900 dark:text-white text-lg flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Appearance"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-3",children:S.map(a=>e.jsxs("button",{onClick:()=>A({...z,theme:a.id}),className:"group relative p-1 rounded-xl border-2 transition-all "+(z.theme===a.id?"border-blue-600 dark:border-blue-400 scale-105 shadow-lg":"border-transparent hover:border-gray-200 dark:hover:border-gray-700"),children:[e.jsx("div",{className:"h-12 rounded-lg shadow-inner border border-black/5 dark:border-white/10 group-hover:shadow-md transition-shadow flex items-center justify-center overflow-hidden",style:{background:a.variables["--bio-bg"]},children:e.jsx("div",{className:"w-1/2 h-4 rounded-sm shadow-sm",style:{backgroundColor:a.variables["--bio-card-bg"],border:`1px solid ${a.variables["--bio-card-border"]}`}})}),e.jsx("p",{className:"text-xs text-center mt-1.5 font-bold text-gray-600 dark:text-gray-400 truncate px-1",children:a.name})]},a.id))})]})]}),e.jsx("div",{className:"hidden lg:block relative",children:e.jsx("div",{className:"sticky top-24",children:e.jsxs("div",{className:"bg-[#121212] rounded-[3.5rem] p-3 border-[10px] border-[#2a2a2a] shadow-2xl relative overflow-hidden max-w-[380px] mx-auto ring-1 ring-black",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-40 h-7 bg-[#2a2a2a] rounded-b-2xl z-20"}),e.jsx("div",{className:"h-[780px] w-full bg-white rounded-[2.5rem] overflow-y-auto no-scrollbar relative",children:e.jsx(C,{previewData:z})})]})})})]}),e.jsx(f,{children:N&&e.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden bg-black/90 backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-900 border-b border-gray-800",children:[e.jsx("h3",{className:"text-white font-bold",children:"Live Preview"}),e.jsx("button",{onClick:()=>L(!1),className:"p-2 bg-gray-800 rounded-full text-white hover:bg-gray-700",children:e.jsx(v,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-900 p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-[380px] h-[80vh] bg-white rounded-[2.5rem] overflow-y-auto no-scrollbar relative border-8 border-gray-800 shadow-2xl",children:e.jsx(C,{previewData:z})})})]})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 p-4 z-40 safe-bottom",children:e.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>L(!0),className:"flex-1 py-3 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl font-bold font-medium flex items-center justify-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Preview"]}),e.jsxs("button",{onClick:B,disabled:s,className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20",children:[s?e.jsx(n,{className:"animate-spin w-5 h-5"}):e.jsx(c,{className:"w-5 h-5"}),"Save Changes"]})]})})]})]})}export{z as default};
