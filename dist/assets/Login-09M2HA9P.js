import{b as e,j as t,E as s,f as a,u as r,L as l,c as i,M as o,h as n}from"./vendor-mINc_jmg.js";import{u as d,a as c}from"./index-cjCEeBZf.js";function x({label:r,value:l,onChange:i,placeholder:o="••••••••",name:n="password",autoComplete:d="current-password",required:c=!0}){const[x,m]=e.useState(!1);return t.jsxs("div",{children:[r&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:r}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:x?"text":"password",name:n,value:l,onChange:i,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white pr-12",placeholder:o,required:c,autoComplete:d}),t.jsx("button",{type:"button",onClick:()=>m(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",tabIndex:-1,children:x?t.jsx(s,{className:"w-5 h-5"}):t.jsx(a,{className:"w-5 h-5"})})]})]})}const m="http://localhost:3000";function u(){const[s,a]=e.useState(""),[u,h]=e.useState(""),[b,g]=e.useState(""),[y,f]=e.useState(!1),[p,v]=e.useState(!1),[w,j]=e.useState(!1),[N,k]=e.useState(!1),{login:C}=d(),S=r(),[L,E]=e.useState(!1);e.useEffect(()=>{const e=()=>{E(document.documentElement.classList.contains("dark"))};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>t.disconnect()},[]);return t.jsx("div",{className:`min-h-screen ${L?"bg-gradient-to-br from-gray-900 via-gray-800 to-black":"bg-gradient-to-br from-blue-50 to-indigo-100"} flex items-center justify-center p-4`,children:t.jsxs("div",{className:"max-w-md w-full",children:[t.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-14 h-14 sm:w-16 sm:h-16 ${L?"bg-blue-500":"bg-blue-600"} rounded-2xl mb-4 shadow-lg`,children:t.jsx(l,{className:"w-7 h-7 sm:w-8 sm:h-8 text-white"})}),t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold "+(L?"text-white":"text-gray-900"),children:"Smart Link API"}),t.jsx("p",{className:"mt-2 text-sm sm:text-base "+(L?"text-gray-400":"text-gray-600"),children:"Sign in to your account"})]}),t.jsxs("div",{className:(L?"bg-gray-800 border-gray-700":"bg-white")+" rounded-2xl shadow-xl p-6 sm:p-8 border",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("button",{onClick:()=>{window.location.href=`${m}/api/auth/google`},type:"button",className:"w-full flex items-center justify-center gap-3 px-4 py-3 border rounded-lg transition-colors "+(L?"border-gray-600 hover:bg-gray-700 text-white":"border-gray-300 hover:bg-gray-50 text-gray-700"),children:[t.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"#4285F4",d:"M22.5 12.3c0-.8-.1-1.6-.3-2.3H12v4.4h6.1c-.3 1.5-1.2 2.8-2.6 3.6v3h4.2c2.4-2.2 3.8-5.4 3.8-9.7z"}),t.jsx("path",{fill:"#34A853",d:"M12 23c3.2 0 5.9-1 7.9-2.7l-4.2-3c-1.1.7-2.5 1.1-3.7 1.1-2.8 0-5.1-1.9-5.9-4.4H2.6v2.8C4.6 20.7 8 23 12 23z"}),t.jsx("path",{fill:"#FBBC05",d:"M6.1 14.7c-.3-1-.3-2.1 0-3.1V8.8H2.6c-.7 1.3-1 2.7-1 4.2s.3 2.9 1 4.2l3.5-2.5z"}),t.jsx("path",{fill:"#EA4335",d:"M12 4.6c1.8 0 3.3.6 4.5 1.8l3.4-3.4C17.9 1.1 15.2 0 12 0 8 0 4.6 2.3 2.6 5.8l3.5 2.8c.8-2.5 3.1-4.4 5.9-4.4z"})]}),t.jsx("span",{className:"font-medium",children:"Continue with Google"})]})}),t.jsxs("div",{className:"relative my-6",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t "+(L?"border-gray-700":"border-gray-300")})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 "+(L?"bg-gray-800 text-gray-400":"bg-white text-gray-500"),children:"Or continue with email"})})]}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g(""),f(!0),v(!1);try{await C({email:s,password:u}),S("/dashboard")}catch(t){const e=t.response?.data?.error||"Login failed";g(e),(e.toLowerCase().includes("verify")||e.toLowerCase().includes("verification")||e.toLowerCase().includes("email not verified"))&&v(!0)}finally{f(!1)}},className:"space-y-5",children:[b&&t.jsx("div",{className:"border rounded-lg p-4 "+(L?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-800"),children:t.jsx("p",{className:"text-sm",children:b})}),N&&t.jsx("div",{className:"border rounded-lg p-4 "+(L?"bg-green-900/30 border-green-800 text-green-300":"bg-green-50 border-green-200 text-green-800"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(i,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-sm",children:"Verification email sent!"}),t.jsx("p",{className:"text-sm mt-1",children:"Please check your inbox and click the verification link."})]})]})}),p&&!N&&t.jsx("div",{className:"border rounded-lg p-4 "+(L?"bg-yellow-900/30 border-yellow-800":"bg-yellow-50 border-yellow-200"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(o,{className:"w-5 h-5 flex-shrink-0 mt-0.5 "+(L?"text-yellow-400":"text-yellow-600")}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium mb-2 "+(L?"text-yellow-300":"text-yellow-800"),children:"Email verification required"}),t.jsx("p",{className:"text-sm mb-3 "+(L?"text-yellow-400":"text-yellow-700"),children:"Didn't receive the verification email?"}),t.jsx("button",{type:"button",onClick:async()=>{if(s){j(!0),g(""),k(!1);try{const{data:e}=await c.post(`${m}/api/auth/resend-verification-public`,{email:s.toLowerCase().trim()});k(!0),g(""),setTimeout(()=>{k(!1),v(!1)},5e3)}catch(e){g(e.response?.data?.error||"Failed to send verification email"),k(!1)}finally{j(!1)}}else g("Please enter your email address")},disabled:w,className:"text-sm font-medium underline disabled:opacity-50 "+(L?"text-yellow-400 hover:text-yellow-300":"text-yellow-700 hover:text-yellow-800"),children:w?"Sending...":"Resend verification email"})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 "+(L?"text-gray-300":"text-gray-700"),children:"Email"}),t.jsx("input",{type:"email",value:s,onChange:e=>a(e.target.value),className:`w-full px-4 py-3 rounded-lg border transition-colors ${L?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500/20":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-blue-500/20"} focus:ring-2 focus:outline-none`,placeholder:"your@email.com",required:!0,autoComplete:"email"})]}),t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium "+(L?"text-gray-300":"text-gray-700"),children:"Password"}),t.jsx(n,{to:"/forgot-password",className:"text-sm font-medium "+(L?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"),children:"Forgot password?"})]}),t.jsx(x,{value:u,onChange:e=>h(e.target.value),placeholder:"••••••••",autoComplete:"current-password"}),t.jsx("button",{type:"submit",disabled:y,className:"w-full py-3 px-4 rounded-lg font-semibold transition-all bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:y?"Signing in...":"Sign In"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("p",{className:"text-sm "+(L?"text-gray-400":"text-gray-600"),children:["Don't have an account?"," ",t.jsx(n,{to:"/register",className:"font-medium "+(L?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"),children:"Sign up"})]})})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx(n,{to:"/",className:`text-sm ${L?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-700"} transition-colors`,children:"← Back to home"})})]})})}export{u as default};
